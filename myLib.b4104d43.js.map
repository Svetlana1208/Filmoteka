{"mappings":"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","sources":["src/myLib.js","src/js/modalMyLib.js"],"sourcesContent":["import authorization from \"./js/authorization\";\nimport { userRef } from \"./js/authorization\";\nimport { refsMyLib } from \"./js/refsMyLib\";\nimport modalMyLib from \"./js/modalMyLib\";\nimport { collection, getDocs } from \"firebase/firestore\";\n\nlet lastPage;\nlet page = 1;\nlet el = 20;\nlet currentPage;\nlet firstPage = 1;\nlet parsedWatchedList;\nlet currentDataAll = [];\nlet parsedQueueList;\n\n\nrefsMyLib.watchedBtn.addEventListener('click', getWatched);\nrefsMyLib.queueBtn.addEventListener('click', getQueue);\nrefsMyLib.prevButton.addEventListener(\"click\", () => {\n    updatePaginationPrev(currentPage - 1);\n    setCurrentPage(currentDataAll, currentPage - 1);\n});\nrefsMyLib.nextButton.addEventListener(\"click\", () => {\n    updatePaginationNext(currentPage + 1);\n    setCurrentPage(currentDataAll, currentPage + 1);\n});\nrefsMyLib.firstPage.addEventListener('click', downloadFirstPage);\nrefsMyLib.lastPage.addEventListener('click', downloadLastPage);\n\n\nauthorization()\n.then(setTimeout(() => {\n    getWatched()}, 1500)\n)\n\nfunction getWatched() {\n    currentDataAll = [];\n    allBtnIsHidden();\n    refsMyLib.watchedBtn.classList.add(\"is-active\");\n    refsMyLib.queueBtn.classList.remove(\"is-active\");\n    refsMyLib.paginationNumbers.innerHTML = \"\";\n    const watchedData = getDocs(collection(userRef, \"watched\"));\n\n    watchedData\n    .then (PromiseResult => {\n        PromiseResult._snapshot.docChanges.forEach((movie) => {\n            currentDataAll.push(movie.doc.data.value.mapValue.fields);\n        })\n        firstDownload();\n    });\n\n    //---------------------------------------------------\n    // Реализация через localStorage:\n    //---------------------------------------------------\n\n    // const savedWatchedList = localStorage.getItem(\"watchedList\");\n    // parsedWatchedList = JSON.parse(savedWatchedList);\n\n    // currentDataAll = parsedWatchedList;\n    // firstDownload();\n    //---------------------------------------------------\n\n}\n\nfunction getQueue() {\n    currentDataAll = [];\n    allBtnIsHidden();\n    refsMyLib.watchedBtn.classList.remove(\"is-active\");\n    refsMyLib.queueBtn.classList.add(\"is-active\");\n    refsMyLib.paginationNumbers.innerHTML = \"\";\n    const queueData = getDocs(collection(userRef, \"queue\"));\n\n    queueData\n    .then (PromiseResult => {\n        PromiseResult._snapshot.docChanges.forEach((movie) => {\n            currentDataAll.push(movie.doc.data.value.mapValue.fields);\n        })\n        firstDownload();\n    });\n\n    //---------------------------------------------------\n    // Реализация через localStorage:\n    //---------------------------------------------------\n\n    // const savedQueueList = localStorage.getItem(\"queue\");\n    // parsedQueueList = JSON.parse(savedQueueList);\n\n    // currentDataAll = parsedQueueList;\n    //---------------------------------------------------\n}\n\nfunction firstDownload() {\n    if (currentDataAll.length !== 0) {\n        refsMyLib.pagination.classList.remove(\"is-hidden\");\n\n        lastPage = Math.ceil(currentDataAll.length / el);\n\n        setCurrentPage(currentDataAll, 1);\n        getPaginationNumbers();\n        handleActivePageNumber();\n        updateFirstLastPageBtn();\n        addEventListenerAllBtn(currentDataAll);\n    } else {\n        refsMyLib.gallery.innerHTML=\"\";\n        refsMyLib.information.classList.remove(\"is-hidden\");\n    }\n}\n\nfunction appendPageNumber(index) {\n    const pageNumber = document.createElement(\"button\");\n    pageNumber.className = \"pagination-number\";\n    pageNumber.innerHTML = index;\n    pageNumber.setAttribute(\"type\", \"button\");\n    pageNumber.setAttribute(\"page-index\", index);\n    pageNumber.setAttribute(\"aria-label\", \"Page \" + index);\n    pageNumber.setAttribute(\"onclick\", \"window.location.href='./myLib.html#myLibGallery'\");\n    refsMyLib.paginationNumbers.appendChild(pageNumber);\n}\n\nfunction getPaginationNumbers() {\n    refsMyLib.paginationNumbers.innerHTML = \"\";\n    refsMyLib.nextButton.classList.remove(\"is-hidden\");\n    refsMyLib.prevButton.classList.remove(\"is-hidden\");\n\n    if (lastPage > 5) {\n        refsMyLib.lastPage.classList.remove(\"is-hidden\");\n        refsMyLib.dotsNext.classList.remove(\"is-hidden\");\n\n        for (let i = page; i <= 5; i += 1) {\n            appendPageNumber(i);\n        }\n    } else {\n        refsMyLib.lastPage.classList.add(\"is-hidden\");\n        refsMyLib.dotsNext.classList.add(\"is-hidden\");\n        refsMyLib.firstPage.classList.add(\"is-hidden\");\n        refsMyLib.dotsPrev.classList.add(\"is-hidden\");\n\n        for (let i = page; i <= lastPage; i += 1) {\n            appendPageNumber(i);\n        }\n    }\n}\n\nfunction setCurrentPage (data, page) {\n        refsMyLib.information.classList.add(\"is-hidden\");\n\n        currentPage = page;\n        page -= 1;\n        const start = el * page;\n        const end = start + el;\n        const currentData = data.slice(start, end);\n\n        onMarkUpLib(currentData);\n        handleActivePageNumber();\n        buttonsStatus();\n        modalMyLib(currentData);                       \n}\n\nfunction onMarkUpLib(data) {\n    refsMyLib.gallery.innerHTML=\"\";\n    currentDataAll.forEach(movie => {\n        movie.genres = [];\n        if(movie.genre_ids.arrayValue) {\n            movie.genre_ids.arrayValue.values.forEach(genres => {\n            movie.genres.push(genres.stringValue);\n        })}\n    })\n    const markup = data.map(card =>\n        `<li class=\"gallery__item\" movie-index = ${card.id.integerValue}>\n            <img class=\"film__poster\" src=\"${card.posterPath.stringValue}${card.poster_path.stringValue}\" alt=\"poster\">\n            <h3 class=\"film__title\">${card.original_title.stringValue.slice(0, 60)}</h3>\n            <p class=\"film__characteristics\">${card.genres.join(\", \").slice(0, 35)} | ${card.release_date.stringValue}</p>\n        </li>`\n    )\n    .join(\"\");\n\n    refsMyLib.gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction allBtnIsHidden() {\n    refsMyLib.nextButton.classList.add(\"is-hidden\");\n    refsMyLib.prevButton.classList.add(\"is-hidden\");\n    refsMyLib.lastPage.classList.add(\"is-hidden\");\n    refsMyLib.dotsNext.classList.add(\"is-hidden\");\n    refsMyLib.firstPage.classList.add(\"is-hidden\");\n    refsMyLib.dotsPrev.classList.add(\"is-hidden\");\n}\n\nfunction disableButton(button) {\n    button.classList.add(\"disabled\");\n    button.setAttribute(\"disabled\", true);\n};\n\nfunction enableButton(button) {\n    button.classList.remove(\"disabled\");\n    button.removeAttribute(\"disabled\");\n};\n\nfunction buttonsStatus() {\n    if (currentPage === 1) {\n        disableButton(refsMyLib.prevButton);\n    } else {\n        enableButton(refsMyLib.prevButton);\n    }\n    if (currentPage === lastPage) {\n        disableButton(refsMyLib.nextButton);\n    } else {\n        enableButton(refsMyLib.nextButton);\n    }\n};\n\nfunction handleActivePageNumber() {\n    document.querySelectorAll(\".pagination-number\").forEach((button) => {\n        button.classList.remove(\"is-active\");\n        \n        const pageIndex = Number(button.getAttribute(\"page-index\"));\n        if (pageIndex === currentPage) {\n          button.classList.add(\"is-active\");\n        }\n      });\n}\n\nfunction addEventListenerAllBtn(data) {\n    document.querySelectorAll(\".pagination-number\").forEach((button) => {\n        const pageIndex = Number(button.getAttribute(\"page-index\"));\n        if (pageIndex) {\n          button.addEventListener(\"click\", () => {\n            setCurrentPage (data, pageIndex);\n        });\n        }\n    });\n}\n\nfunction updateFirstLastPageBtn() {\n    refsMyLib.firstPage.setAttribute(\"page-index\", firstPage);\n    refsMyLib.firstPage.setAttribute(\"aria-label\", \"Page \" + firstPage);\n    refsMyLib.firstPage.innerHTML = firstPage;\n\n    refsMyLib.lastPage.setAttribute(\"page-index\", lastPage);\n    refsMyLib.lastPage.setAttribute(\"aria-label\", \"Page \" + lastPage);\n    refsMyLib.lastPage.innerHTML = lastPage;\n}\n\nfunction getPaginationNumbersNext(page) {\n    refsMyLib.paginationNumbers.innerHTML = \"\";\n    if (currentPage === 5 && lastPage === 6) {\n        refsMyLib.dotsPrev.classList.remove(\"is-hidden\");\n        for (let i = page - 4; i < currentPage + 2; i += 1) {\n            appendPageNumber(i);\n          }    \n    } \n    else if (currentPage === 5 && lastPage === 7) {\n        refsMyLib.dotsPrev.classList.remove(\"is-hidden\");\n        for (let i = page - 3; i < currentPage + 3; i += 1) {\n            appendPageNumber(i);\n          }    \n    } \n    else if (currentPage === 5 && lastPage === 8) {\n        refsMyLib.dotsPrev.classList.remove(\"is-hidden\");\n        for (let i = page - 2; i < currentPage + 4; i += 1) {\n            appendPageNumber(i);\n          }    \n    } \n    else if (currentPage === 5 && lastPage === 9) {\n        refsMyLib.dotsPrev.classList.remove(\"is-hidden\");\n        for (let i = page - 1; i < currentPage + 4; i += 1) {\n            appendPageNumber(i);\n          }    \n    } else if (currentPage === lastPage) {\n        for (let i = page - 5; i < page; i += 1) {\n            appendPageNumber(i + 1);\n          }\n    }\n    else {\n        for (let i = page; i < page + 5; i += 1) {\n            appendPageNumber(i);\n          }    \n    }\n}\n\nfunction updatePaginationNext(page) {\n    if (currentPage === 5 && refsMyLib.paginationNumbers.lastElementChild === document.querySelector('.pagination-number.is-active')) {\n        refsMyLib.firstPage.classList.remove(\"is-hidden\");\n    }\n\n    if (refsMyLib.paginationNumbers.lastElementChild === document.querySelector('.pagination-number.is-active') && page !== lastPage) {\n        getPaginationNumbersNext(page);\n        addEventListenerAllBtn(currentDataAll);\n    }\n\n    if (currentPage === lastPage - 1 && lastPage > 7) {\n        getPaginationNumbersPrev(page);\n        handleActivePageNumber();\n        addEventListenerAllBtn(currentDataAll);\n    }\n    \n    if (Number(refsMyLib.paginationNumbers.firstElementChild.getAttribute(\"page-index\")) === 6) {\n        refsMyLib.firstPage.classList.remove(\"is-hidden\");\n        refsMyLib.dotsPrev.classList.remove(\"is-hidden\");\n    }\n    \n    if (Number(refsMyLib.paginationNumbers.firstElementChild.getAttribute(\"page-index\")) === lastPage - 5 && Number(refsMyLib.paginationNumbers.lastElementChild.getAttribute(\"page-index\")) !== 5) {\n        refsMyLib.dotsNext.classList.add(\"is-hidden\");\n    }\n\n    if (Number(refsMyLib.paginationNumbers.firstElementChild.getAttribute(\"page-index\")) === lastPage - 4) {\n        refsMyLib.lastPage.classList.add(\"is-hidden\");\n        refsMyLib.dotsNext.classList.add(\"is-hidden\");\n    }\n}\n\nfunction getPaginationNumbersPrev(page) {\n    refsMyLib.paginationNumbers.innerHTML = \"\";\n    if (currentPage > 1 && currentPage < 6 && refsMyLib.paginationNumbers.firstElementChild === document.querySelector('.pagination-number.is-active')) {\n        for (let i = 1; i < 6; i += 1) {\n            appendPageNumber(i);\n        }\n        refsMyLib.dotsNext.classList.remove(\"is-hidden\");\n        refsMyLib.lastPage.classList.remove(\"is-hidden\");\n\n    } else {\n        for (let i = page - 5; i < page; i += 1) {\n            appendPageNumber(i + 1);\n          }\n    }    \n}\n\nfunction updatePaginationPrev(page) {\n    if (refsMyLib.paginationNumbers.firstElementChild === document.querySelector('.pagination-number.is-active') && refsMyLib.paginationNumbers.firstElementChild.innerHTML !== \"1\") {\n        getPaginationNumbersPrev(page);\n        addEventListenerAllBtn(currentDataAll);\n    }\n\n    if (Number(refsMyLib.paginationNumbers.lastElementChild.getAttribute(\"page-index\")) === lastPage - 5) {\n        refsMyLib.dotsNext.classList.remove(\"is-hidden\");\n        refsMyLib.lastPage.classList.remove(\"is-hidden\");\n    }\n\n    if (Number(refsMyLib.paginationNumbers.lastElementChild.getAttribute(\"page-index\")) === 5) {\n        refsMyLib.firstPage.classList.add(\"is-hidden\");\n        refsMyLib.dotsPrev.classList.add(\"is-hidden\");\n    }\n}\n\nfunction downloadFirstPage() {\n    setCurrentPage(currentDataAll, 1); \n    getPaginationNumbers(currentPage);\n    addEventListenerAllBtn(currentDataAll);\n    handleActivePageNumber();\n\n    refsMyLib.lastPage.classList.remove(\"is-hidden\");\n    refsMyLib.dotsNext.classList.remove(\"is-hidden\");\n    refsMyLib.firstPage.classList.add(\"is-hidden\");\n    refsMyLib.dotsPrev.classList.add(\"is-hidden\");\n}\n\nfunction downloadLastPage() {\n    setCurrentPage(currentDataAll, lastPage);\n    getPaginationNumbersPrev(currentPage);\n    addEventListenerAllBtn(currentDataAll);\n    handleActivePageNumber();\n\n    refsMyLib.dotsNext.classList.add(\"is-hidden\");\n    refsMyLib.dotsPrev.classList.remove(\"is-hidden\");\n    refsMyLib.firstPage.classList.remove(\"is-hidden\");\n    refsMyLib.lastPage.classList.add(\"is-hidden\");\n}\n\n","import {refsMyLib} from \"./refsMyLib\";\nimport {key} from \"./vars\";\nimport fetchRequest from \"./fetch\";\nimport YouTubePlayer from 'youtube-player';\n\nlet trailerKey;\n\nconst modalMyLib = (data) => {\n    document.querySelectorAll(\".gallery__item\").forEach((card) => {\n\n        card.addEventListener(\"click\", () => {\n            const movieIndex = Number(card.getAttribute(\"movie-index\"));\n\n            data.forEach((movie) => {\n                if (Number(movie.id.integerValue) === movieIndex) {\n                    const markupCard = \n                        `<article class=\"movie\">\n                            <div>\n                                <img class=\"movie__poster\" src=\"${movie.posterPath.stringValue}${movie.poster_path.stringValue}\" alt=\"poster\">\n                            </div>\n                            <div class=\"movie__box\">\n                                <h3 class=\"movie__title\">${movie.original_title.stringValue}</h3>\n                                <ul>\n                                    <li class=\"movie__characteristic\">\n                                        <p class=\"movie__characteristicKey\">Vote / Votes</p>\n                                        <div class=\"vote__average\">${movie.vote_average.doubleValue}</div><span>&nbsp / &nbsp</span>\n                                        <div class=\"vote__count\">${movie.vote_count.integerValue}</div>\n                                    </li>\n                                    <li class=\"movie__characteristic\">\n                                        <p class=\"movie__characteristicKey\">Popularity</p>\n                                        <p class=\"movie__characteristicValue\">${movie.popularity.doubleValue}</p>\n                                    </li>\n                                    <li class=\"movie__characteristic\">\n                                        <p class=\"movie__characteristicKey\">Original Title</p>\n                                        <p class=\"movie__characteristicValue\">${movie.original_title.stringValue}</p>\n                                    </li>\n                                    <li class=\"movie__characteristic\">\n                                        <p class=\"movie__characteristicKey\">Genre</p>\n                                        <p class=\"movie__characteristicValue\">${movie.genres}</p>    \n                                    </li>\n                                </ul>    \n                                <p class=\"movie__about\">About</p>\n                                <p class=\"movie__description\">${movie.overview.stringValue}</p>\n                                <div class=\"movie__btnBox\">\n                                    <button class=\"movie__btn\" type=\"button\" data-add-to-watched>add to Watched</button>\n                                    <button class=\"movie__btn\" type=\"button\" data-add-to-queue>add to queue</button>\n                                </div>\n\n                                <button class=\"movie__trailer\" type=\"button\" data-trailerModal-button>Trailer</button>\n                                <div class=\"backdrop is-hidden\" data-trailerModal>\n                                    <div class=\"trailerBox\">\n                                        <button class=\"trailerBox__closeBtn\" type=\"button\" data-trailerClose-button></button>\n                                        <div id=\"player\"></div>\n                                    </div>\n                                </div>\n                            </div>\n                        </article>`;\n                \n                    refsMyLib.movieCardBox.innerHTML = markupCard;\n\n                    onOpenModal();\n\n                    function onOpenModal() {\n                        refsMyLib.modal.classList.remove(\"is-hidden\");\n                        document.body.classList.add(\"body-modal-open\");\n                        document.querySelector(\"[data-add-to-watched]\").classList.add(\"disabledBtn\");\n                        document.querySelector(\"[data-add-to-queue]\").classList.add(\"disabledBtn\");\n                        document.querySelector(\"[data-trailerModal-button]\").addEventListener('click', onTrailer);\n                        window.addEventListener('keydown', onEscKeyPress);\n                        refsMyLib.closeModalBtn.addEventListener('click', onCloseModal);                            \n                        refsMyLib.modal.addEventListener('click', onBackdropClick);\n                        \n                        downloadUrlTrailer();\n                    }\n\n                    function onCloseModal() {\n                        refsMyLib.modal.classList.add(\"is-hidden\");\n                        document.body.classList.remove(\"body-modal-open\");\n                    }\n\n                    function onEscKeyPress(e) {\n                        if (e.code === 'Escape') {\n                            onCloseModal();\n                        }\n                    }\n\n                    function onBackdropClick(e) {\n                        if (e.currentTarget === e.target) {\n                            onCloseModal();\n                        }\n                    }\n\n                    async function downloadUrlTrailer() {\n                        let trailerObject;\n                        const url = `https://api.themoviedb.org/3/movie/${movie.id.integerValue}/videos?api_key=${key}&language=en-US`;\n                        try {\n                            trailerObject = await fetchRequest(url);\n                        } catch (error) {\n                            console.error(error);\n                        }\n                        \n                        trailerObject.results.find(trailer => {\n                            if (trailer.name.includes('Official')) {\n                            trailerKey = trailer.key;\n                            return trailerKey} else {\n                            trailerKey = trailerObject.results[0].key;\n                            }\n                        }) \n                    }\n\n                    function onTrailer() {\n                        document.querySelector(\"[data-trailerModal]\").classList.remove(\"is-hidden\");\n\n\n                        let player;\n                \n                        player = YouTubePlayer('player', {\n                            width: '100%',\n                            videoId: trailerKey,\n                            host: 'https://www.youtube.com',\n                        });\n                    \n                        player.playVideo();\n\n                        function stopVideo() {\n                            player.stopVideo();\n                        }\n\n                        document.querySelector(\"[data-trailerClose-button]\").addEventListener('click', () => {\n                            stopVideo();\n                            document.querySelector(\"[data-trailerModal]\").classList.add(\"is-hidden\");\n                        });\n\n                    }\n            }\n        })\n    });\n});\n}\n\nexport default modalMyLib;"],"names":["$a953a7b8769ec13c$var$trailerKey","$a011c36209e7ab79$var$lastPage","$a011c36209e7ab79$var$currentPage","$ebCjK","parcelRequire","$bpxeT","$a953a7b8769ec13c$export$2e2bcd8739ae039","data","document","querySelectorAll","forEach","card","addEventListener","movieIndex","Number","getAttribute","movie","id","integerValue","markupCard","concat","posterPath","stringValue","poster_path","original_title","vote_average","doubleValue","vote_count","popularity","genres","overview","onCloseModal","$hhpkh","refsMyLib","modal","classList","add","body","remove","onEscKeyPress","e","code","onBackdropClick","currentTarget","target","_downloadUrlTrailer","$parcel$interopDefault","$2TvXO","mark","_callee","trailerObject","url","$7basD","key","$5g02X","default","_ctx","sent","console","error","t0","results","find","trailer","name","includes","apply","this","arguments","onTrailer","player","querySelector","$ePWgG","width","videoId","host","playVideo","stopVideo","movieCardBox","innerHTML","window","closeModalBtn","downloadUrlTrailer","$a011c36209e7ab79$var$currentDataAll","$a011c36209e7ab79$var$getWatched","$a011c36209e7ab79$var$allBtnIsHidden","watchedBtn","queueBtn","paginationNumbers","$6m2hf","getDocs","collection","userRef","then","PromiseResult","_snapshot","docChanges","push","doc","value","mapValue","fields","$a011c36209e7ab79$var$firstDownload","length","pagination","Math","ceil","$a011c36209e7ab79$var$setCurrentPage","$a011c36209e7ab79$var$getPaginationNumbers","$a011c36209e7ab79$var$handleActivePageNumber","firstPage","setAttribute","lastPage","$a011c36209e7ab79$var$addEventListenerAllBtn","gallery","information","$a011c36209e7ab79$var$appendPageNumber","index","pageNumber","createElement","className","appendChild","nextButton","prevButton","dotsNext","i","dotsPrev","i1","page1","start","end","currentData","slice","genre_ids","arrayValue","values","markup","map","join","release_date","insertAdjacentHTML","$a011c36209e7ab79$var$onMarkUpLib","$a011c36209e7ab79$var$disableButton","$a011c36209e7ab79$var$enableButton","$a011c36209e7ab79$var$buttonsStatus","button","removeAttribute","pageIndex","$a011c36209e7ab79$var$getPaginationNumbersPrev","page4","firstElementChild","i7","page5","lastElementChild","$a011c36209e7ab79$var$updatePaginationPrev","page3","page2","i2","i3","i4","i5","i6","$a011c36209e7ab79$var$getPaginationNumbersNext","$a011c36209e7ab79$var$updatePaginationNext","setTimeout"],"version":3,"file":"myLib.b4104d43.js.map"}