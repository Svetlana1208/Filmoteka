const e={gallery:document.querySelector(".gallery"),paginationNumbers:document.querySelector(".pagination__current"),nextButton:document.getElementById("next-button"),prevButton:document.getElementById("prev-button"),firstPage:document.querySelector(".pagination__firstPage"),dotsPrev:document.querySelector(".pagination__dotsPrev"),lastPage:document.querySelector(".pagination__lastPage"),dotsNext:document.querySelector(".pagination__dotsNext"),form:document.querySelector(".search__form"),searchIcon:document.querySelector(".search__icon"),searchSpinner:document.querySelector(".spinner"),searchInfo:document.querySelector(".search__info"),movieCardBox:document.querySelector(".movieCard__box"),modal:document.querySelector("[data-modal]"),closeModalBtn:document.querySelector("[data-modal-close]")},t={};var i=async()=>{const e=await fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=4273054ff6f056d7541ef873941254f6&language=en-US");return function(e){for(const i of e.genres)t[i.id]=i.name}(await e.json()),t};var s=async e=>{try{const t=await fetch(e);return await t.json()}catch(e){console.error(e)}};const a={watchedBtn:document.querySelector("[data-watched-button]"),queueBtn:document.querySelector("[data-queue-button]"),gallery:document.querySelector(".myLibGallery"),information:document.querySelector(".information"),movieCardBox:document.querySelector(".movieCard__box"),modal:document.querySelector("[data-modal]"),closeModalBtn:document.querySelector("[data-modal-close]"),paginationNumbers:document.querySelector(".pagination__current"),nextButton:document.getElementById("next-button"),prevButton:document.getElementById("prev-button"),firstPage:document.querySelector(".pagination__firstPage"),dotsPrev:document.querySelector(".pagination__dotsPrev"),lastPage:document.querySelector(".pagination__lastPage"),dotsNext:document.querySelector(".pagination__dotsNext")};let n,o=1;let r,d,c,l,u,m;async function g(){await i(),l="https://api.themoviedb.org/3/trending/movie/day?api_key=4273054ff6f056d7541ef873941254f6",await p(1),h(),y(),P(),_()}async function p(i){n=i,u=`${l}&page=${i}`;try{c=await s(u),0!==c.total_results?(r=c.total_pages,function(e){let i;for(const s of e.results){if(null===s.poster_path?(s.posterPath="https://upload.wikimedia.org/wikipedia/commons/a/a1",s.poster_path="/Out_Of_Poster.jpg"):s.posterPath="https://image.tmdb.org/t/p/w500",s.genre_ids)for(let e=0;e<s.genre_ids.length;e+=1)s.genre_ids[e]=t[s.genre_ids[e]];else s.genre_ids=["absent"];s.release_date&&(i=s.release_date.slice(0,4),s.release_date=i)}}(c),function(t){e.gallery.innerHTML="";const i=t.map((e=>`<li class="gallery__item" movie-index = ${e.id}>\n            <img class="film__poster" src="${e.posterPath}${e.poster_path}" alt="poster">\n            <h3 class="film__title">${e.original_title}</h3>\n            <p class="film__characteristics">${e.genre_ids.join(", ")} | ${e.release_date}</p>\n        </li>`)).join("");e.gallery.insertAdjacentHTML("beforeend",i)}(c.results),function(){1===n?f(e.prevButton):b(e.prevButton);n===r?f(e.nextButton):b(e.nextButton)}(),_(),o=c.results,document.querySelectorAll(".gallery__item").forEach((t=>{t.addEventListener("click",(()=>{const i=Number(t.getAttribute("movie-index"));o.forEach((t=>{if(t.id===i){const i=t,s=`<article class="movie">\n                            <div>\n                                <img class="movie__poster" src="${i.posterPath}${i.poster_path}" alt="poster">\n                            </div>\n                            <div class="movie__box">\n                                <h3 class="movie__title">${i.original_title}</h3>\n                                <ul>\n                                    <li class="movie__characteristic">\n                                        <p class="movie__characteristicKey">Vote / Votes</p>\n                                        <div class="vote__average">${i.vote_average}</div><span>&nbsp / &nbsp</span>\n                                        <div class="vote__count">${i.vote_count}</div>\n                                    </li>\n                                    <li class="movie__characteristic">\n                                        <p class="movie__characteristicKey">Popularity</p>\n                                        <p class="movie__characteristicValue">${i.popularity}</p>\n                                    </li>\n                                    <li class="movie__characteristic">\n                                        <p class="movie__characteristicKey">Original Title</p>\n                                        <p class="movie__characteristicValue">${i.original_title}</p>\n                                    </li>\n                                    <li class="movie__characteristic">\n                                        <p class="movie__characteristicKey">Genre</p>\n                                        <p class="movie__characteristicValue">${i.genre_ids.join(", ")}</p>    \n                                    </li>\n                                </ul>    \n                                <p class="movie__about">About</p>\n                                <p class="movie__description">${i.overview}</p>\n                                <div class="movie__btnBox">\n                                    <button class="movie__btn is-active" type="button" data-add-to-watched>add to Watched</button>\n                                    <button class="movie__btn" type="button" data-add-to-queue>add to queue</button>\n                                </div>\n                            </div>\n                        </article>`;e.movieCardBox.innerHTML=s,e.modal.classList.remove("is-hidden"),a.movieCardBox.innerHTML=s,a.modal.classList.remove("is-hidden"),document.body.classList.add("body-modal-open"),document.querySelector("[data-add-to-watched]").addEventListener("click",(function(){const e=JSON.parse(localStorage.getItem("watchedList"))||[];e.some((e=>e.id===i.id))||(e.push(i),localStorage.setItem("watchedList",JSON.stringify(e)))})),document.querySelector("[data-add-to-queue]").addEventListener("click",(function(){const e=JSON.parse(localStorage.getItem("queue"))||[];e.some((e=>e.id===i.id))||(e.push(i),localStorage.setItem("queue",JSON.stringify(e)))}))}}))}))}))):(e.searchInfo.textContent="Search result not successful. Enter the correct movie name.",g())}catch(e){console.error(e)}var o}function v(t){const i=document.createElement("button");i.className="pagination-number",i.innerHTML=t,i.setAttribute("type","button"),i.setAttribute("page-index",t),i.setAttribute("aria-label","Page "+t),i.setAttribute("onclick","window.location.href='./index.html#gallery'"),e.paginationNumbers.appendChild(i)}function h(){if(e.paginationNumbers.innerHTML="",e.nextButton.classList.remove("is-hidden"),e.prevButton.classList.remove("is-hidden"),c.total_pages>5){e.lastPage.classList.remove("is-hidden"),e.dotsNext.classList.remove("is-hidden");for(let e=o;e<=5;e+=1)v(e)}else{e.lastPage.classList.add("is-hidden"),e.dotsNext.classList.add("is-hidden"),e.firstPage.classList.add("is-hidden"),e.dotsPrev.classList.add("is-hidden");for(let e=o;e<=c.total_pages;e+=1)v(e)}}function _(){document.querySelectorAll(".pagination-number").forEach((e=>{e.classList.remove("is-active");Number(e.getAttribute("page-index"))===n&&e.classList.add("is-active")}))}function f(e){e.classList.add("disabled"),e.setAttribute("disabled",!0)}function b(e){e.classList.remove("disabled"),e.removeAttribute("disabled")}function y(){document.querySelectorAll(".pagination-number").forEach((e=>{const t=Number(e.getAttribute("page-index"));t&&e.addEventListener("click",(()=>{p(t)}))}))}function L(t){if(e.paginationNumbers.innerHTML="",n>1&&n<6&&e.paginationNumbers.firstElementChild===document.querySelector(".pagination-number.is-active")){for(let e=1;e<6;e+=1)v(e);e.dotsNext.classList.remove("is-hidden"),e.lastPage.classList.remove("is-hidden")}else for(let e=t-5;e<t;e+=1)v(e+1)}function P(){e.firstPage.setAttribute("page-index",1),e.firstPage.setAttribute("aria-label","Page 1"),e.firstPage.innerHTML=1,e.lastPage.setAttribute("page-index",r),e.lastPage.setAttribute("aria-label","Page "+r),e.lastPage.innerHTML=r}e.prevButton.addEventListener("click",(()=>{!function(t){e.paginationNumbers.firstElementChild===document.querySelector(".pagination-number.is-active")&&"1"!==e.paginationNumbers.firstElementChild.innerHTML&&(L(t),y());Number(e.paginationNumbers.lastElementChild.getAttribute("page-index"))===r-5&&(e.dotsNext.classList.remove("is-hidden"),e.lastPage.classList.remove("is-hidden"));5===Number(e.paginationNumbers.lastElementChild.getAttribute("page-index"))&&(e.firstPage.classList.add("is-hidden"),e.dotsPrev.classList.add("is-hidden"))}(n-1),p(n-1)})),e.nextButton.addEventListener("click",(()=>{!function(t){e.paginationNumbers.lastElementChild===document.querySelector(".pagination-number.is-active")&&Number(e.paginationNumbers.lastElementChild.getAttribute("page-index"))!==r&&(!function(t){if(e.paginationNumbers.innerHTML="",5===n&&6===r){e.dotsPrev.classList.remove("is-hidden");for(let e=t-4;e<n+2;e+=1)v(e)}else if(5===n&&7===r){e.dotsPrev.classList.remove("is-hidden");for(let e=t-3;e<n+3;e+=1)v(e)}else if(5===n&&8===r){e.dotsPrev.classList.remove("is-hidden");for(let e=t-2;e<n+4;e+=1)v(e)}else if(5===n&&9===r){e.dotsPrev.classList.remove("is-hidden");for(let e=t-1;e<n+4;e+=1)v(e)}else for(let e=t;e<t+5;e+=1)v(e)}(t),y());n===r-1&&(L(t),_(),y(currentDataAll));6===Number(e.paginationNumbers.firstElementChild.getAttribute("page-index"))&&(e.firstPage.classList.remove("is-hidden"),e.dotsPrev.classList.remove("is-hidden"));Number(e.paginationNumbers.firstElementChild.getAttribute("page-index"))===r-5&&e.dotsNext.classList.add("is-hidden");Number(e.paginationNumbers.firstElementChild.getAttribute("page-index"))===r-4&&(e.lastPage.classList.add("is-hidden"),e.dotsNext.classList.add("is-hidden"))}(n+1),p(n+1)})),e.firstPage.addEventListener("click",(function(){p(1),h(),y(),e.lastPage.classList.remove("is-hidden"),e.dotsNext.classList.remove("is-hidden"),e.firstPage.classList.add("is-hidden"),e.dotsPrev.classList.add("is-hidden")})),e.lastPage.addEventListener("click",(function(){p(r),L(n),y(),e.dotsNext.classList.add("is-hidden"),e.dotsPrev.classList.remove("is-hidden"),e.firstPage.classList.remove("is-hidden"),e.lastPage.classList.add("is-hidden")})),e.form.addEventListener("submit",(async function(t){t.preventDefault(),e.searchIcon.classList.add("is-hidden"),e.searchSpinner.classList.remove("is-hidden"),e.gallery.innerHTML="",m=t.currentTarget,d=m.elements.searchQuery.value,o=1,e.searchInfo.textContent="",l=`https://api.themoviedb.org/3/search/movie?api_key=4273054ff6f056d7541ef873941254f6&query=${d}`,await p(o),h(),y(),P(),_(),e.searchIcon.classList.remove("is-hidden"),e.searchSpinner.classList.add("is-hidden")})),e.closeModalBtn.addEventListener("click",(()=>{e.modal.classList.add("is-hidden"),document.body.classList.remove("body-modal-open")})),e.modal.addEventListener("click",(()=>{e.modal.classList.add("is-hidden"),document.body.classList.remove("body-modal-open")})),g();
//# sourceMappingURL=index.aac94d8c.js.map
