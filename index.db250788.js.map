{"mappings":"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","sources":["src/index.js"],"sourcesContent":["const key = '4273054ff6f056d7541ef873941254f6';\nconst genresList = {};\nlet currentPage;\nlet page = 1;\nlet lastPage;\n\nconst refs = {\n    gallery: document.querySelector('.gallery'),\n    paginationNumbers: document.querySelector('.pagination__current'),\n    nextButton: document.getElementById(\"next-button\"),\n    prevButton: document.getElementById(\"prev-button\"),\n    lastPage: document.querySelector(\".pagination__lastPage\"),\n}\n\n\nwindow.addEventListener(\"load\", firstDownload());\n    \nfunction firstDownload() {    \n    getPaginationNumbers(page);\n\n    document.querySelectorAll(\".pagination-number\").forEach((button) => {\n        const pageIndex = Number(button.getAttribute(\"page-index\"));\n\n        if (pageIndex) {\n          button.addEventListener(\"click\", () => {\n            setCurrentPage(pageIndex);\n          });\n        }\n      });\n\n    fetchRequestGenres()\n    .then(dataGenres => makeGenresList(dataGenres))\n    .then(setCurrentPage(1));\n    \n\n\n    refs.prevButton.addEventListener(\"click\", () => {\n        updatePaginationPrev(currentPage - 1);\n        setCurrentPage(currentPage - 1);\n    });\n\n    refs.nextButton.addEventListener(\"click\", () => {\n        updatePaginationNext(currentPage + 1);\n        setCurrentPage(currentPage + 1);\n    });\n\n\n\n    // refs.lastPage.innerHTML = data.total_pages;\n    // lastPage = Number(refs.lastPage.getAttribute(\"page-index\"));\n    // // console.log(lastPage);\n    // refs.lastPage.addEventListener('click', setCurrentPage(lastPage));\n\n\n\n}\n\nasync function fetchRequestGenres() {\n    const response = await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${key}&language=en-US`);\n    const dataGenres = await response.json();\n    console.log(2);\n    return dataGenres;\n\n}\n\nfunction makeGenresList(dataGenres) {\n    for (genre of dataGenres.genres) {\n        genresList[genre.id] = genre.name;\n    }\n    console.log(3);\n\n}\n\nasync function fetchRequestPopular(page) {\n    const response = await fetch(`https://api.themoviedb.org/3/trending/movie/day?api_key=${key}&page=${page}`);\n    const data = await response.json();\n    console.log(5);\n\n    return data;\n}\n\nfunction updateDescription (data) {\n    let releaseYear;\n\n    console.log(6);\n\n    for (pop of data.results) {\n        for (let i = 0; i < pop.genre_ids.length; i+=1) {\n            pop.genre_ids[i] = genresList[pop.genre_ids[i]];\n\n            releaseYear = pop.release_date.slice(0, 4);\n            pop.release_date = releaseYear;\n        }\n    }\n}\n\nfunction onMarkUp(data) {\n    markup = data.results.map(card =>\n        `<li class=\"gallery__item\">\n            <img class=\"film__poster\" src=\"https://image.tmdb.org/t/p/w500${card.poster_path}\" alt=\"poster\">\n            <h3 class=\"film__title\">${card.original_title}</h3>\n            <p class=\"film__characteristics\">${card.genre_ids.join(\", \")} | ${card.release_date}</p>\n        </li>`)\n        .join(\"\");\n\n        refs.gallery.insertAdjacentHTML('beforeend', markup);\n        console.log(7);\n\n}\n\nasync function setCurrentPage(page) {\n    console.log(\"set\")\n    currentPage = page;\n    handleActivePageNumber();\n\n    const data = await fetchRequestPopular(page);\n    updateDescription(data);\n    refs.gallery.innerHTML=\"\";\n    onMarkUp(data);\n    buttonsStatus(data);\n\n}\n\nfunction appendPageNumber(index) {\n    const pageNumber = document.createElement(\"button\");\n    pageNumber.className = \"pagination-number\";\n    pageNumber.innerHTML = index;\n    pageNumber.setAttribute(\"page-index\", index);\n    pageNumber.setAttribute(\"aria-label\", \"Page \" + index);\n    refs.paginationNumbers.appendChild(pageNumber);\n}\n\nfunction getPaginationNumbers(page) {\n    for (let i = page; i <= 5; i += 1) {\n        appendPageNumber(i);\n    }\n    console.log(1);\n}\n\nfunction handleActivePageNumber() {\n    document.querySelectorAll(\".pagination-number\").forEach((button) => {\n        button.classList.remove(\"is-active\");\n        \n        const pageIndex = Number(button.getAttribute(\"page-index\"));\n        if (pageIndex == currentPage) {\n          button.classList.add(\"is-active\");\n        }\n      });\n    \n      console.log(4);\n\n}\n\nfunction getPaginationNumbersNext(page) {\n    refs.paginationNumbers.innerHTML = \"\";\n    for (let i = page; i < page + 5; i += 1) {\n        appendPageNumber(i);\n      }\n}\n\nfunction getPaginationNumbersPrev(page) {\n    refs.paginationNumbers.innerHTML = \"\";\n    for (let i = page - 5; i < page; i += 1) {\n        appendPageNumber(i + 1);\n      }\n}\n\n\nfunction disableButton(button) {\n    button.classList.add(\"disabled\");\n    button.setAttribute(\"disabled\", true);\n};\n\nfunction enableButton(button) {\n    button.classList.remove(\"disabled\");\n    button.removeAttribute(\"disabled\");\n};\n\nfunction buttonsStatus(data) {\n    if (currentPage === 1) {\n        disableButton(refs.prevButton);\n    } else {\n        enableButton(refs.prevButton);\n    }\n\n    if (data.total_pages === currentPage) {\n        disableButton(refs.nextButton);\n    } else {\n        enableButton(refs.nextButton);\n    }\n};\n\nfunction updatePaginationNext(page) {\n    if (refs.paginationNumbers.lastElementChild === document.querySelector('.pagination-number.is-active')) {\n        refs.paginationNumbers.innerHTML = \"\";\n        getPaginationNumbersNext(page);\n\n        document.querySelectorAll(\".pagination-number\").forEach((button) => {\n            const pageIndex = Number(button.getAttribute(\"page-index\"));\n            if (pageIndex) {\n              button.addEventListener(\"click\", () => {\n                setCurrentPage(pageIndex);\n              });\n            }\n          });    \n    }\n}\n    \nfunction updatePaginationPrev(page) {\n    if (refs.paginationNumbers.firstElementChild === document.querySelector('.pagination-number.is-active') && refs.paginationNumbers.firstElementChild.innerHTML !== \"1\") {\n        refs.paginationNumbers.innerHTML = \"\";\n        getPaginationNumbersPrev(page);\n\n        document.querySelectorAll(\".pagination-number\").forEach((button) => {\n            const pageIndex = Number(button.getAttribute(\"page-index\"));\n            if (pageIndex) {\n              button.addEventListener(\"click\", () => {\n                setCurrentPage(pageIndex);\n              });\n            }\n          });    \n    }\n}\n\nfunction qqq(data) {\n}"],"names":["$1f0dc3b9307be026$var$genresList","$1f0dc3b9307be026$var$currentPage","$1f0dc3b9307be026$var$refs","gallery","document","querySelector","paginationNumbers","nextButton","getElementById","prevButton","lastPage","async","$1f0dc3b9307be026$var$setCurrentPage","page2","console","log","querySelectorAll","forEach","button","classList","remove","Number","getAttribute","add","data","page1","response","fetch","json","$1f0dc3b9307be026$var$fetchRequestPopular","releaseYear","pop","results","i","genre_ids","length","release_date","slice","$1f0dc3b9307be026$var$updateDescription","innerHTML","markup","map","card","poster_path","original_title","join","insertAdjacentHTML","$1f0dc3b9307be026$var$onMarkUp","$1f0dc3b9307be026$var$disableButton","$1f0dc3b9307be026$var$enableButton","total_pages","$1f0dc3b9307be026$var$buttonsStatus","$1f0dc3b9307be026$var$appendPageNumber","index","pageNumber","createElement","className","setAttribute","appendChild","removeAttribute","window","addEventListener","page3","$1f0dc3b9307be026$var$getPaginationNumbers","pageIndex","dataGenres","$1f0dc3b9307be026$var$fetchRequestGenres","then","genre","genres","id","name","$1f0dc3b9307be026$var$makeGenresList","page7","firstElementChild","page5","$1f0dc3b9307be026$var$getPaginationNumbersPrev","page6","lastElementChild","page4","$1f0dc3b9307be026$var$getPaginationNumbersNext"],"version":3,"file":"index.db250788.js.map"}