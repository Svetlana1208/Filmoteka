function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s={},i={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in s)return s[e].exports;if(e in i){var t=i[e];delete i[e];var r={id:e,exports:{}};return s[e]=r,t.call(r.exports,r,r.exports),r.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){i[e]=t},t.parcelRequired7c6=r);var a=r("czhBR"),n=r("eyjy7"),d=r("hWKZL"),o=r("krGWQ");d=r("hWKZL");const l={};var c=async()=>{const e=await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${d.key}&language=en-US`);return function(e){for(const t of e.genres)l[t.id]=t.name}(await e.json()),l},u=r("cyIMT"),f=(o=r("krGWQ"),d=r("hWKZL"),u=r("cyIMT"),r("fmSdN")),m=r("ftYLF");a=r("czhBR");let v;var g=t=>{document.querySelectorAll(".gallery__item").forEach((s=>{s.addEventListener("click",(()=>{const i=Number(s.getAttribute("movie-index"));t.forEach((t=>{if(t.id===i){const p=`<article class="movie">\n                                <div>\n                                    <img class="movie__poster" src="${t.posterPath}${t.poster_path}" alt="poster">\n                                </div>\n                                <div class="movie__box">\n                                    <h3 class="movie__title">${t.original_title}</h3>\n                                    <ul>\n                                        <li class="movie__characteristic">\n                                            <p class="movie__characteristicKey">Vote / Votes</p>\n                                            <div class="vote__average">${t.vote_average}</div><span>&nbsp / &nbsp</span>\n                                            <div class="vote__count">${t.vote_count}</div>\n                                        </li>\n                                        <li class="movie__characteristic">\n                                            <p class="movie__characteristicKey">Popularity</p>\n                                            <p class="movie__characteristicValue">${t.popularity}</p>\n                                        </li>\n                                        <li class="movie__characteristic">\n                                            <p class="movie__characteristicKey">Original Title</p>\n                                            <p class="movie__characteristicValue">${t.original_title}</p>\n                                        </li>\n                                        <li class="movie__characteristic">\n                                            <p class="movie__characteristicKey">Genre</p>\n                                            <p class="movie__characteristicValue">${t.genre_ids.join(", ")}</p>    \n                                        </li>\n                                    </ul>    \n                                    <p class="movie__about">About</p>\n                                    <p class="movie__description">${t.overview}</p>\n                                    <div class="movie__btnBox">\n                                        <button class="movie__btn" type="button" data-add-to-watched>add to Watched</button>\n                                        <button class="movie__btn" type="button" data-add-to-queue>add to queue</button>\n                                    </div>\n\n                                    <button class="movie__trailer" type="button" data-trailerModal-button>Trailer</button>\n                                    <div class="backdrop is-hidden" data-trailerModal>\n                                        <div class="trailerBox">\n                                            <button class="trailerBox__closeBtn" type="button" data-trailerClose-button></button>\n                                            <div id="player"></div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </article>`;function s(){o.refs.modal.classList.add("is-hidden"),document.body.classList.remove("body-modal-open")}function r(e){"Escape"===e.code&&s()}function n(e){e.currentTarget===e.target&&s()}function l(){(0,m.setDoc)((0,m.doc)(a.watchedMovies,`${t.id}`),t),s()}function c(){(0,m.setDoc)((0,m.doc)(a.queueMovies,`${t.id}`),t),s()}function g(){let t;document.querySelector("[data-trailerModal]").classList.remove("is-hidden"),t=e(f)("player",{width:"100%",videoId:v,host:"https://www.youtube.com"}),t.playVideo(),document.querySelector("[data-trailerClose-button]").addEventListener("click",(()=>{t.stopVideo(),document.querySelector("[data-trailerModal]").classList.add("is-hidden")}))}o.refs.movieCardBox.innerHTML=p,function(){o.refs.modal.classList.remove("is-hidden"),document.body.classList.add("body-modal-open"),document.querySelector("[data-trailerModal-button]").addEventListener("click",g),window.addEventListener("keydown",r),o.refs.closeModalBtn.addEventListener("click",s),o.refs.modal.addEventListener("click",n),""===o.refs.userLogin.textContent?(document.querySelector("[data-add-to-watched]").classList.add("disabledBtn"),document.querySelector("[data-add-to-queue]").classList.add("disabledBtn")):(document.querySelector("[data-add-to-watched]").addEventListener("click",l),document.querySelector("[data-add-to-queue]").addEventListener("click",c));!async function(){let e;const s=`https://api.themoviedb.org/3/movie/${t.id}/videos?api_key=${d.key}&language=en-US`;try{e=await(0,u.default)(s)}catch(e){console.error(e)}e.results.find((t=>{if(t.name.includes("Official"))return v=t.key,v;v=e.results[0].key}))}()}()}}))}))}))};let p,h=1;let b,L,_,y,P,E;async function w(){await c(),y=`https://api.themoviedb.org/3/trending/movie/day?api_key=${d.key}`,await x(1),N(),$(),C(),k()}async function x(e){p=e,P=`${y}&page=${e}`;try{_=await(0,u.default)(P),0!==_.total_results?(b=_.total_pages,function(e){let t;for(const s of e.results){if(null===s.poster_path?(s.posterPath="https://upload.wikimedia.org/wikipedia/commons/a/a1",s.poster_path="/Out_Of_Poster.jpg"):s.posterPath="https://image.tmdb.org/t/p/w500",s.genre_ids)for(let e=0;e<s.genre_ids.length;e+=1)s.genre_ids[e]=l[s.genre_ids[e]];else s.genre_ids=["absent"];s.release_date&&(t=s.release_date.slice(0,4),s.release_date=t)}}(_),function(e){o.refs.gallery.innerHTML="";const t=e.map((e=>`<li class="gallery__item" movie-index = ${e.id}>\n            <img class="film__poster" src="${e.posterPath}${e.poster_path}" alt="poster">\n            <h3 class="film__title">${e.original_title.slice(0,60)}</h3>\n            <p class="film__characteristics">${e.genre_ids.join(", ").slice(0,35)} | ${e.release_date}</p>\n        </li>`)).join("");o.refs.gallery.insertAdjacentHTML("beforeend",t)}(_.results),function(){1===p?T(o.refs.prevButton):A(o.refs.prevButton);p===b?T(o.refs.nextButton):A(o.refs.nextButton)}(),k(),g(_.results)):(o.refs.searchInfo.textContent="Search result not successful. Enter the correct movie name.",w())}catch(e){console.error(e)}}function M(e){const t=document.createElement("button");t.className="pagination-number",t.innerHTML=e,t.setAttribute("type","button"),t.setAttribute("page-index",e),t.setAttribute("aria-label","Page "+e),t.setAttribute("onclick","window.location.href='./index.html#gallery'"),o.refs.paginationNumbers.appendChild(t)}function N(){if(o.refs.paginationNumbers.innerHTML="",o.refs.nextButton.classList.remove("is-hidden"),o.refs.prevButton.classList.remove("is-hidden"),_.total_pages>5){o.refs.lastPage.classList.remove("is-hidden"),o.refs.dotsNext.classList.remove("is-hidden");for(let e=h;e<=5;e+=1)M(e)}else{o.refs.lastPage.classList.add("is-hidden"),o.refs.dotsNext.classList.add("is-hidden"),o.refs.firstPage.classList.add("is-hidden"),o.refs.dotsPrev.classList.add("is-hidden");for(let e=h;e<=_.total_pages;e+=1)M(e)}}function k(){document.querySelectorAll(".pagination-number").forEach((e=>{e.classList.remove("is-active");Number(e.getAttribute("page-index"))===p&&e.classList.add("is-active")}))}function T(e){e.classList.add("disabled"),e.setAttribute("disabled",!0)}function A(e){e.classList.remove("disabled"),e.removeAttribute("disabled")}function $(){document.querySelectorAll(".pagination-number").forEach((e=>{const t=Number(e.getAttribute("page-index"));t&&e.addEventListener("click",(()=>{x(t)}))}))}function q(e){if(o.refs.paginationNumbers.innerHTML="",p>1&&p<6&&o.refs.paginationNumbers.firstElementChild===document.querySelector(".pagination-number.is-active")){for(let e=1;e<6;e+=1)M(e);o.refs.dotsNext.classList.remove("is-hidden"),o.refs.lastPage.classList.remove("is-hidden")}else for(let t=e-5;t<e;t+=1)M(t+1)}function C(){o.refs.firstPage.setAttribute("page-index",1),o.refs.firstPage.setAttribute("aria-label","Page 1"),o.refs.firstPage.innerHTML=1,o.refs.lastPage.setAttribute("page-index",b),o.refs.lastPage.setAttribute("aria-label","Page "+b),o.refs.lastPage.innerHTML=b}function S(){o.refs.regModal.classList.add("is-hidden"),document.body.classList.remove("body-modal-open"),I()}function B(e){"Escape"===e.code&&S()}function H(e){e.currentTarget===e.target&&S()}function I(){o.refs.regInfo.innerHTML="",o.refs.regEmail.value="",o.refs.regPassword.value="",o.refs.regConfirmPassword.value="",o.refs.regEmail.classList.remove("error"),o.refs.regPassword.classList.remove("error"),o.refs.regConfirmPassword.classList.remove("error")}function O(e){e.preventDefault();const{elements:{email:t,password:s,confirmPassword:i}}=e.currentTarget;return""===t.value?(o.refs.regEmail.classList.add("error"),o.refs.regInfo.innerHTML="Please fill in all the fields!"):""===s.value?(o.refs.regPassword.classList.add("error"),o.refs.regInfo.innerHTML="Please fill in all the fields!"):s.value!==i.value||""===i.value?(o.refs.regPassword.classList.add("error"),o.refs.regConfirmPassword.classList.add("error"),o.refs.regInfo.innerHTML="Enter correct password"):s.value.length<5?o.refs.regInfo.innerHTML="Enter a stronger password":(user={email:t.value,password:s.value},void(0,n.createUserWithEmailAndPassword)(d.auth,user.email,user.password).then((e=>{e.user;o.refs.regModal.classList.add("is-hidden"),I()})).catch((e=>{const t=e.code;return"auth/invalid-email"===t?(o.refs.regEmail.classList.add("error"),o.refs.regInfo.innerHTML="Enter correct email"):"auth/email-already-in-use"===t?(o.refs.regEmail.classList.add("error"),o.refs.regInfo.innerHTML="Such a user already exists"):void 0})))}o.refs.prevButton.addEventListener("click",(()=>{!function(e){o.refs.paginationNumbers.firstElementChild===document.querySelector(".pagination-number.is-active")&&"1"!==o.refs.paginationNumbers.firstElementChild.innerHTML&&(q(e),$());Number(o.refs.paginationNumbers.lastElementChild.getAttribute("page-index"))===b-5&&(o.refs.dotsNext.classList.remove("is-hidden"),o.refs.lastPage.classList.remove("is-hidden"));5===Number(o.refs.paginationNumbers.lastElementChild.getAttribute("page-index"))&&(o.refs.firstPage.classList.add("is-hidden"),o.refs.dotsPrev.classList.add("is-hidden"))}(p-1),x(p-1)})),o.refs.nextButton.addEventListener("click",(()=>{!function(e){o.refs.paginationNumbers.lastElementChild===document.querySelector(".pagination-number.is-active")&&Number(o.refs.paginationNumbers.lastElementChild.getAttribute("page-index"))!==b&&(!function(e){if(o.refs.paginationNumbers.innerHTML="",5===p&&6===b){o.refs.dotsPrev.classList.remove("is-hidden");for(let t=e-4;t<p+2;t+=1)M(t)}else if(5===p&&7===b){o.refs.dotsPrev.classList.remove("is-hidden");for(let t=e-3;t<p+3;t+=1)M(t)}else if(5===p&&8===b){o.refs.dotsPrev.classList.remove("is-hidden");for(let t=e-2;t<p+4;t+=1)M(t)}else if(5===p&&9===b){o.refs.dotsPrev.classList.remove("is-hidden");for(let t=e-1;t<p+4;t+=1)M(t)}else for(let t=e;t<e+5;t+=1)M(t)}(e),$());p===b-1&&(q(e),k(),$(currentDataAll));6===Number(o.refs.paginationNumbers.firstElementChild.getAttribute("page-index"))&&(o.refs.firstPage.classList.remove("is-hidden"),o.refs.dotsPrev.classList.remove("is-hidden"));Number(o.refs.paginationNumbers.firstElementChild.getAttribute("page-index"))===b-5&&o.refs.dotsNext.classList.add("is-hidden");Number(o.refs.paginationNumbers.firstElementChild.getAttribute("page-index"))===b-4&&(o.refs.lastPage.classList.add("is-hidden"),o.refs.dotsNext.classList.add("is-hidden"))}(p+1),x(p+1)})),o.refs.firstPage.addEventListener("click",(function(){x(1),N(),$(),o.refs.lastPage.classList.remove("is-hidden"),o.refs.dotsNext.classList.remove("is-hidden"),o.refs.firstPage.classList.add("is-hidden"),o.refs.dotsPrev.classList.add("is-hidden")})),o.refs.lastPage.addEventListener("click",(function(){x(b),q(p),$(),o.refs.dotsNext.classList.add("is-hidden"),o.refs.dotsPrev.classList.remove("is-hidden"),o.refs.firstPage.classList.remove("is-hidden"),o.refs.lastPage.classList.add("is-hidden")})),o.refs.form.addEventListener("submit",(async function(e){e.preventDefault(),o.refs.searchIcon.classList.add("is-hidden"),o.refs.searchSpinner.classList.remove("is-hidden"),o.refs.gallery.innerHTML="",E=e.currentTarget,L=E.elements.searchQuery.value,h=1,o.refs.searchInfo.textContent="",y=`https://api.themoviedb.org/3/search/movie?api_key=${d.key}&query=${L}`,await x(h),N(),$(),C(),k(),o.refs.searchIcon.classList.remove("is-hidden"),o.refs.searchSpinner.classList.add("is-hidden")})),o.refs.regModalOpenBtn.addEventListener("click",(function(){o.refs.regModal.classList.remove("is-hidden"),document.body.classList.add("body-modal-open"),o.refs.regModalCloseBtn.addEventListener("click",S),window.addEventListener("keydown",B),o.refs.regModal.addEventListener("click",H),o.refs.regForm.addEventListener("submit",O)})),(0,a.default)().then(setTimeout((()=>{w()}),1e3));
//# sourceMappingURL=index.87c810bc.js.map
