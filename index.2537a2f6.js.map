{"mappings":"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","sources":["src/index.js"],"sourcesContent":["const key = '4273054ff6f056d7541ef873941254f6';\nconst genresList = {};\nlet currentPage;\nlet page = 1;\nlet lastPage;\n\nconst refs = {\n    gallery: document.querySelector('.gallery'),\n    paginationNumbers: document.querySelector('.pagination__current'),\n    nextButton: document.getElementById(\"next-button\"),\n    prevButton: document.getElementById(\"prev-button\"),\n    lastPage: document.querySelector(\".pagination__lastPage\"),\n}\n\nrefs.prevButton.addEventListener(\"click\", () => {\n    updatePaginationPrev(currentPage - 1);\n    setCurrentPage(currentPage - 1);\n});\n\nrefs.nextButton.addEventListener(\"click\", () => {\n    updatePaginationNext(currentPage + 1);\n    setCurrentPage(currentPage + 1);\n});\n\nrefs.lastPage.addEventListener('click', () => {\n    setCurrentPage(lastPage);\n});\n\n\nwindow.addEventListener(\"load\", firstDownload());\n    \nfunction firstDownload() {\n    fetchRequestGenres()\n    .then(dataGenres => {\n        makeGenresList(dataGenres);\n        getPaginationNumbers(page);\n        addEventListenerAllBtns();\n        setCurrentPage(1);\n    })\n}\n\nasync function fetchRequestGenres() {\n    const response = await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${key}&language=en-US`);\n    const dataGenres = await response.json();\n    return dataGenres;\n\n}\n\nfunction makeGenresList(dataGenres) {\n    for (genre of dataGenres.genres) {\n        genresList[genre.id] = genre.name;\n    }\n}\n\nasync function fetchRequestPopular(page) {\n    const response = await fetch(`https://api.themoviedb.org/3/trending/movie/day?api_key=${key}&page=${page}`);\n    const data = await response.json();\n    return data;\n}\n\nfunction updateDescription (data) {\n    let releaseYear;\n    for (pop of data.results) {\n        if (pop.genre_ids) {\n        for (let i = 0; i < pop.genre_ids.length; i+=1) {\n            pop.genre_ids[i] = genresList[pop.genre_ids[i]];\n\n            releaseYear = pop.release_date.slice(0, 4);\n            pop.release_date = releaseYear;\n        }\n    }\n    }\n}\n\nfunction onMarkUp(data) {\n    refs.gallery.innerHTML=\"\";\n    markup = data.results.map(card =>\n        `<li class=\"gallery__item\">\n            <img class=\"film__poster\" src=\"https://image.tmdb.org/t/p/w500${card.poster_path}\" alt=\"poster\">\n            <h3 class=\"film__title\">${card.original_title}</h3>\n            <p class=\"film__characteristics\">${card.genre_ids.join(\", \")} | ${card.release_date}</p>\n        </li>`)\n        .join(\"\");\n\n        refs.gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction setCurrentPage(page) {\n    currentPage = page;\n\n    fetchRequestPopular(page)\n    .then(data => {\n        updateDescription(data);\n        onMarkUp(data);\n        updateLastPage(data);\n        buttonsStatus(data);\n        handleActivePageNumber();\n        return data;\n    })\n}\n\nfunction appendPageNumber(index) {\n    const pageNumber = document.createElement(\"button\");\n    pageNumber.className = \"pagination-number\";\n    pageNumber.innerHTML = index;\n    pageNumber.setAttribute(\"page-index\", index);\n    pageNumber.setAttribute(\"aria-label\", \"Page \" + index);\n    refs.paginationNumbers.appendChild(pageNumber);\n}\n\nfunction getPaginationNumbers(page) {\n    for (let i = page; i <= 5; i += 1) {\n        appendPageNumber(i);\n    }\n}\n\nfunction handleActivePageNumber() {\n    document.querySelectorAll(\".pagination-number\").forEach((button) => {\n        button.classList.remove(\"is-active\");\n        \n        const pageIndex = Number(button.getAttribute(\"page-index\"));\n        if (pageIndex == currentPage) {\n          button.classList.add(\"is-active\");\n        }\n      });\n}\n\nfunction addEventListenerAllBtns() {\n    document.querySelectorAll(\".pagination-number\").forEach((button) => {\n        const pageIndex = Number(button.getAttribute(\"page-index\"));\n        if (pageIndex) {\n          button.addEventListener(\"click\", () => {\n            setCurrentPage(pageIndex);\n          });\n        }\n    });\n}\n\nfunction getPaginationNumbersNext(page) {\n    refs.paginationNumbers.innerHTML = \"\";\n    for (let i = page; i < page + 5; i += 1) {\n        appendPageNumber(i);\n      }\n}\n\nfunction getPaginationNumbersPrev(page) {\n    refs.paginationNumbers.innerHTML = \"\";\n    for (let i = page - 5; i < page; i += 1) {\n        appendPageNumber(i + 1);\n      }\n}\n\nfunction disableButton(button) {\n    button.classList.add(\"disabled\");\n    button.setAttribute(\"disabled\", true);\n};\n\nfunction enableButton(button) {\n    button.classList.remove(\"disabled\");\n    button.removeAttribute(\"disabled\");\n};\n\nfunction buttonsStatus(data) {\n    if (currentPage === 1) {\n        disableButton(refs.prevButton);\n    } else {\n        enableButton(refs.prevButton);\n    }\n\n    if (currentPage === lastPage) {\n        disableButton(refs.nextButton);\n    } else {\n        enableButton(refs.nextButton);\n    }\n};\n\nfunction updatePaginationNext(page) {\n    if (refs.paginationNumbers.lastElementChild === document.querySelector('.pagination-number.is-active')) {\n        refs.paginationNumbers.innerHTML = \"\";\n        getPaginationNumbersNext(page);\n\n        document.querySelectorAll(\".pagination-number\").forEach((button) => {\n            const pageIndex = Number(button.getAttribute(\"page-index\"));\n            if (pageIndex) {\n              button.addEventListener(\"click\", () => {\n                setCurrentPage(pageIndex);\n              });\n            }\n          });    \n    }\n}\n    \nfunction updatePaginationPrev(page) {\n    if (refs.paginationNumbers.firstElementChild === document.querySelector('.pagination-number.is-active') && refs.paginationNumbers.firstElementChild.innerHTML !== \"1\") {\n        refs.paginationNumbers.innerHTML = \"\";\n        getPaginationNumbersPrev(page);\n\n        document.querySelectorAll(\".pagination-number\").forEach((button) => {\n            const pageIndex = Number(button.getAttribute(\"page-index\"));\n            if (pageIndex) {\n              button.addEventListener(\"click\", () => {\n                setCurrentPage(pageIndex);\n              });\n            }\n          });    \n    }\n}\n\nfunction updateLastPage(data) {\n    lastPage = data.total_pages - 1;\n    refs.lastPage.className = \"pagination-number\";\n    refs.lastPage.setAttribute(\"page-index\", lastPage);\n    refs.lastPage.setAttribute(\"aria-label\", \"Page \" + lastPage);\n    refs.lastPage.innerHTML = lastPage;\n}\n\n"],"names":["$1f0dc3b9307be026$var$genresList","$1f0dc3b9307be026$var$currentPage","$1f0dc3b9307be026$var$lastPage","$1f0dc3b9307be026$var$refs","gallery","document","querySelector","paginationNumbers","nextButton","getElementById","prevButton","lastPage","$1f0dc3b9307be026$var$setCurrentPage","page2","async","page1","response","fetch","json","$1f0dc3b9307be026$var$fetchRequestPopular","then","data","releaseYear","pop","results","genre_ids","i","length","release_date","slice","$1f0dc3b9307be026$var$updateDescription","innerHTML","markup","map","card","poster_path","original_title","join","insertAdjacentHTML","$1f0dc3b9307be026$var$onMarkUp","total_pages","className","setAttribute","$1f0dc3b9307be026$var$updateLastPage","$1f0dc3b9307be026$var$disableButton","$1f0dc3b9307be026$var$enableButton","$1f0dc3b9307be026$var$buttonsStatus","querySelectorAll","forEach","button","classList","remove","Number","getAttribute","add","$1f0dc3b9307be026$var$appendPageNumber","index","pageNumber","createElement","appendChild","removeAttribute","addEventListener","page7","firstElementChild","page5","$1f0dc3b9307be026$var$getPaginationNumbersPrev","pageIndex","page6","lastElementChild","page4","$1f0dc3b9307be026$var$getPaginationNumbersNext","window","$1f0dc3b9307be026$var$fetchRequestGenres","dataGenres","genre","genres","id","name","$1f0dc3b9307be026$var$makeGenresList","page3","$1f0dc3b9307be026$var$getPaginationNumbers"],"version":3,"file":"index.2537a2f6.js.map"}