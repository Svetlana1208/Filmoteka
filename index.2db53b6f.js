function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s={},i={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in s)return s[e].exports;if(e in i){var t=i[e];delete i[e];var r={id:e,exports:{}};return s[e]=r,t.call(r.exports,r,r.exports),r.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){i[e]=t},t.parcelRequired7c6=r);var a=r("czhBR"),n=r("eyjy7"),o=r("hWKZL"),d=r("krGWQ");o=r("hWKZL");const l={};var c=async()=>{const e=await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${o.key}&language=en-US`);return function(e){for(const t of e.genres)l[t.id]=t.name}(await e.json()),l},u=r("cyIMT"),f=(d=r("krGWQ"),o=r("hWKZL"),u=r("cyIMT"),r("fmSdN")),m=r("ftYLF");a=r("czhBR");let v;var g=t=>{document.querySelectorAll(".gallery__item").forEach((s=>{s.addEventListener("click",(()=>{const i=Number(s.getAttribute("movie-index"));t.forEach((t=>{if(t.id===i){const h=`<article class="movie">\n                                <div>\n                                    <img class="movie__poster" src="${t.posterPath}${t.poster_path}" alt="poster">\n                                </div>\n                                <div class="movie__box">\n                                    <h3 class="movie__title">${t.original_title}</h3>\n                                    <ul>\n                                        <li class="movie__characteristic">\n                                            <p class="movie__characteristicKey">Vote / Votes</p>\n                                            <div class="vote__average">${t.vote_average}</div><span>&nbsp / &nbsp</span>\n                                            <div class="vote__count">${t.vote_count}</div>\n                                        </li>\n                                        <li class="movie__characteristic">\n                                            <p class="movie__characteristicKey">Popularity</p>\n                                            <p class="movie__characteristicValue">${t.popularity}</p>\n                                        </li>\n                                        <li class="movie__characteristic">\n                                            <p class="movie__characteristicKey">Original Title</p>\n                                            <p class="movie__characteristicValue">${t.original_title}</p>\n                                        </li>\n                                        <li class="movie__characteristic">\n                                            <p class="movie__characteristicKey">Genre</p>\n                                            <p class="movie__characteristicValue">${t.genre_ids.join(", ")}</p>    \n                                        </li>\n                                    </ul>    \n                                    <p class="movie__about">About</p>\n                                    <p class="movie__description">${t.overview}</p>\n                                    <div class="movie__btnBox">\n                                        <button class="movie__btn" type="button" data-add-to-watched>add to Watched</button>\n                                        <button class="movie__btn" type="button" data-add-to-queue>add to queue</button>\n                                    </div>\n\n                                    <button class="movie__trailer" type="button" data-trailerModal-button>Trailer</button>\n                                    <div class="backdrop is-hidden" data-trailerModal>\n                                        <div class="trailerBox">\n                                            <button class="trailerBox__closeBtn" type="button" data-trailerClose-button></button>\n                                            <div id="player"></div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </article>`;function s(){d.refs.modal.classList.add("is-hidden"),document.body.classList.remove("body-modal-open")}function r(e){"Escape"===e.code&&s()}function n(e){e.currentTarget===e.target&&s()}function l(){(0,m.setDoc)((0,m.doc)(a.watchedMovies,`${t.id}`),t),s()}function c(){(0,m.setDoc)((0,m.doc)(a.queueMovies,`${t.id}`),t),s()}function g(){let t;document.querySelector("[data-trailerModal]").classList.remove("is-hidden"),t=e(f)("player",{width:"100%",videoId:v,host:"https://www.youtube.com",origin:"https://svetlana1208.github.io/Filmoteka/"}),t.playVideo(),document.querySelector("[data-trailerClose-button]").addEventListener("click",(()=>{t.stopVideo(),document.querySelector("[data-trailerModal]").classList.add("is-hidden")}))}d.refs.movieCardBox.innerHTML=h,function(){d.refs.modal.classList.remove("is-hidden"),document.body.classList.add("body-modal-open"),document.querySelector("[data-trailerModal-button]").addEventListener("click",g),window.addEventListener("keydown",r),d.refs.closeModalBtn.addEventListener("click",s),d.refs.modal.addEventListener("click",n),""===d.refs.userLogin.textContent?(document.querySelector("[data-add-to-watched]").classList.add("disabledBtn"),document.querySelector("[data-add-to-queue]").classList.add("disabledBtn")):(document.querySelector("[data-add-to-watched]").addEventListener("click",l),document.querySelector("[data-add-to-queue]").addEventListener("click",c));!async function(){let e;const s=`https://api.themoviedb.org/3/movie/${t.id}/videos?api_key=${o.key}&language=en-US`;try{e=await(0,u.default)(s)}catch(e){console.error(e)}e.results.find((t=>{if(t.name.includes("Official"))return v=t.key,v;v=e.results[0].key}))}()}()}}))}))}))};let h,p=1;let L,b,_,y,w,E,P;async function x(){await c(),y=`https://api.themoviedb.org/3/trending/movie/day?api_key=${o.key}`,await k(1),N(),B(),C(),T()}async function k(e){h=e,w=`${y}&page=${e}`;try{_=await(0,u.default)(w),0!==_.total_results?(L=_.total_pages,function(e){let t;for(const s of e.results){if(null===s.poster_path?(s.posterPath="https://upload.wikimedia.org/wikipedia/commons/a/a1",s.poster_path="/Out_Of_Poster.jpg"):s.posterPath="https://image.tmdb.org/t/p/w500",s.genre_ids)for(let e=0;e<s.genre_ids.length;e+=1)s.genre_ids[e]=l[s.genre_ids[e]];else s.genre_ids=["absent"];s.release_date&&(t=s.release_date.slice(0,4),s.release_date=t)}}(_),function(e){d.refs.gallery.innerHTML="";const t=e.map((e=>`<li class="gallery__item" movie-index = ${e.id}>\n            <img class="film__poster" src="${e.posterPath}${e.poster_path}" alt="poster">\n            <h3 class="film__title">${e.original_title.slice(0,60)}</h3>\n            <p class="film__characteristics">${e.genre_ids.join(", ").slice(0,35)} | ${e.release_date}</p>\n        </li>`)).join("");d.refs.gallery.insertAdjacentHTML("beforeend",t)}(_.results),function(){1===h?A(d.refs.prevButton):$(d.refs.prevButton);h===L?A(d.refs.nextButton):$(d.refs.nextButton)}(),T(),g(_.results)):(d.refs.searchInfo.textContent="Search result not successful. Enter the correct movie name.",x())}catch(e){console.error(e)}}function M(e){const t=document.createElement("button");t.className="pagination-number",t.innerHTML=e,t.setAttribute("type","button"),t.setAttribute("page-index",e),t.setAttribute("aria-label","Page "+e),t.setAttribute("onclick","window.location.href='./index.html#gallery'"),d.refs.paginationNumbers.appendChild(t)}function N(){if(d.refs.paginationNumbers.innerHTML="",d.refs.nextButton.classList.remove("is-hidden"),d.refs.prevButton.classList.remove("is-hidden"),_.total_pages>5){d.refs.lastPage.classList.remove("is-hidden"),d.refs.dotsNext.classList.remove("is-hidden");for(let e=p;e<=5;e+=1)M(e)}else{d.refs.lastPage.classList.add("is-hidden"),d.refs.dotsNext.classList.add("is-hidden"),d.refs.firstPage.classList.add("is-hidden"),d.refs.dotsPrev.classList.add("is-hidden");for(let e=p;e<=_.total_pages;e+=1)M(e)}}function T(){document.querySelectorAll(".pagination-number").forEach((e=>{e.classList.remove("is-active");Number(e.getAttribute("page-index"))===h&&e.classList.add("is-active")}))}function A(e){e.classList.add("disabled"),e.setAttribute("disabled",!0)}function $(e){e.classList.remove("disabled"),e.removeAttribute("disabled")}function B(){document.querySelectorAll(".pagination-number").forEach((e=>{const t=Number(e.getAttribute("page-index"));t&&e.addEventListener("click",(()=>{k(t)}))}))}function q(e){if(d.refs.paginationNumbers.innerHTML="",h>1&&h<6&&d.refs.paginationNumbers.firstElementChild===document.querySelector(".pagination-number.is-active")){for(let e=1;e<6;e+=1)M(e);d.refs.dotsNext.classList.remove("is-hidden"),d.refs.lastPage.classList.remove("is-hidden")}else for(let t=e-5;t<e;t+=1)M(t+1)}function C(){d.refs.firstPage.setAttribute("page-index",1),d.refs.firstPage.setAttribute("aria-label","Page 1"),d.refs.firstPage.innerHTML=1,d.refs.lastPage.setAttribute("page-index",L),d.refs.lastPage.setAttribute("aria-label","Page "+L),d.refs.lastPage.innerHTML=L}function S(){d.refs.regModal.classList.add("is-hidden"),document.body.classList.remove("body-modal-open"),O()}function H(e){"Escape"===e.code&&S()}function I(e){e.currentTarget===e.target&&S()}function O(){d.refs.regInfo.innerHTML="",d.refs.regEmail.value="",d.refs.regPassword.value="",d.refs.regConfirmPassword.value="",d.refs.regEmail.classList.remove("error"),d.refs.regPassword.classList.remove("error"),d.refs.regConfirmPassword.classList.remove("error")}function j(e){e.preventDefault();const{elements:{email:t,password:s,confirmPassword:i}}=e.currentTarget;return""===t.value?(d.refs.regEmail.classList.add("error"),d.refs.regInfo.innerHTML="Please fill in all the fields!"):""===s.value?(d.refs.regPassword.classList.add("error"),d.refs.regInfo.innerHTML="Please fill in all the fields!"):s.value!==i.value||""===i.value?(d.refs.regPassword.classList.add("error"),d.refs.regConfirmPassword.classList.add("error"),d.refs.regInfo.innerHTML="Enter correct password"):s.value.length<5?d.refs.regInfo.innerHTML="Enter a stronger password":(user={email:t.value,password:s.value},void(0,n.createUserWithEmailAndPassword)(o.auth,user.email,user.password).then((e=>{e.user;d.refs.regModal.classList.add("is-hidden"),O()})).catch((e=>{const t=e.code;return"auth/invalid-email"===t?(d.refs.regEmail.classList.add("error"),d.refs.regInfo.innerHTML="Enter correct email"):"auth/email-already-in-use"===t?(d.refs.regEmail.classList.add("error"),d.refs.regInfo.innerHTML="Such a user already exists"):void 0})))}d.refs.prevButton.addEventListener("click",(()=>{!function(e){d.refs.paginationNumbers.firstElementChild===document.querySelector(".pagination-number.is-active")&&"1"!==d.refs.paginationNumbers.firstElementChild.innerHTML&&(q(e),B());Number(d.refs.paginationNumbers.lastElementChild.getAttribute("page-index"))===L-5&&(d.refs.dotsNext.classList.remove("is-hidden"),d.refs.lastPage.classList.remove("is-hidden"));5===Number(d.refs.paginationNumbers.lastElementChild.getAttribute("page-index"))&&(d.refs.firstPage.classList.add("is-hidden"),d.refs.dotsPrev.classList.add("is-hidden"))}(h-1),k(h-1)})),d.refs.nextButton.addEventListener("click",(()=>{!function(e){d.refs.paginationNumbers.lastElementChild===document.querySelector(".pagination-number.is-active")&&Number(d.refs.paginationNumbers.lastElementChild.getAttribute("page-index"))!==L&&(!function(e){if(d.refs.paginationNumbers.innerHTML="",5===h&&6===L){d.refs.dotsPrev.classList.remove("is-hidden");for(let t=e-4;t<h+2;t+=1)M(t)}else if(5===h&&7===L){d.refs.dotsPrev.classList.remove("is-hidden");for(let t=e-3;t<h+3;t+=1)M(t)}else if(5===h&&8===L){d.refs.dotsPrev.classList.remove("is-hidden");for(let t=e-2;t<h+4;t+=1)M(t)}else if(5===h&&9===L){d.refs.dotsPrev.classList.remove("is-hidden");for(let t=e-1;t<h+4;t+=1)M(t)}else for(let t=e;t<e+5;t+=1)M(t)}(e),B());h===L-1&&(q(e),T(),B(currentDataAll));6===Number(d.refs.paginationNumbers.firstElementChild.getAttribute("page-index"))&&(d.refs.firstPage.classList.remove("is-hidden"),d.refs.dotsPrev.classList.remove("is-hidden"));Number(d.refs.paginationNumbers.firstElementChild.getAttribute("page-index"))===L-5&&d.refs.dotsNext.classList.add("is-hidden");Number(d.refs.paginationNumbers.firstElementChild.getAttribute("page-index"))===L-4&&(d.refs.lastPage.classList.add("is-hidden"),d.refs.dotsNext.classList.add("is-hidden"))}(h+1),k(h+1)})),d.refs.firstPage.addEventListener("click",(function(){k(1),N(),B(),d.refs.lastPage.classList.remove("is-hidden"),d.refs.dotsNext.classList.remove("is-hidden"),d.refs.firstPage.classList.add("is-hidden"),d.refs.dotsPrev.classList.add("is-hidden")})),d.refs.lastPage.addEventListener("click",(function(){k(L),q(h),B(),d.refs.dotsNext.classList.add("is-hidden"),d.refs.dotsPrev.classList.remove("is-hidden"),d.refs.firstPage.classList.remove("is-hidden"),d.refs.lastPage.classList.add("is-hidden")})),d.refs.form.addEventListener("submit",(async function(e){e.preventDefault(),d.refs.searchIcon.classList.add("is-hidden"),d.refs.searchSpinner.classList.remove("is-hidden"),d.refs.gallery.innerHTML="",E=e.currentTarget,b=E.elements.searchQuery.value,p=1,d.refs.searchInfo.textContent="",y=`https://api.themoviedb.org/3/search/movie?api_key=${o.key}&query=${b}`,await k(p),N(),B(),C(),T(),d.refs.searchIcon.classList.remove("is-hidden"),d.refs.searchSpinner.classList.add("is-hidden")})),d.refs.regModalOpenBtn.addEventListener("click",(function(){d.refs.regModal.classList.remove("is-hidden"),document.body.classList.add("body-modal-open"),d.refs.regModalCloseBtn.addEventListener("click",S),window.addEventListener("keydown",H),d.refs.regModal.addEventListener("click",I),d.refs.regForm.addEventListener("submit",j)})),d.refs.searchByGenresBtn.addEventListener("click",(function(){d.refs.genresList.classList.toggle("show"),d.refs.searchInfo.textContent="",document.querySelector(".search__input").value="",window.onclick=function(e){e.target.matches(".searchBox__genresBtn")||d.refs.genresList.classList.contains("show")&&d.refs.genresList.classList.remove("show")},document.querySelectorAll(".searchBox__genresList p").forEach((e=>{const t=e.textContent;e.addEventListener("click",(async()=>{for(const e in l)l[e]===t&&(P=e,d.refs.searchInfo.innerHTML=t);d.refs.gallery.innerHTML="",y=`https://api.themoviedb.org/3/discover/movie?api_key=${o.key}&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&page=1&with_genres=${P}&with_watch_monetization_types=flatrate`,await k(1),N(),B(),C(),T()}))}))})),(0,a.default)().then(setTimeout((()=>{x()}),1e3));
//# sourceMappingURL=index.2db53b6f.js.map
