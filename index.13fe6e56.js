var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s={},r={},t=e.parcelRequired7c6;null==t&&((t=function(e){if(e in s)return s[e].exports;if(e in r){var t=r[e];delete r[e];var i={id:e,exports:{}};return s[e]=i,t.call(i.exports,i,i.exports),i.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,s){r[e]=s},e.parcelRequired7c6=t);var i=t("hWKZL");t("hWKZL"),i=t("hWKZL");const a={};var n=async()=>{const e=await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${i.key}&language=en-US`);return function(e){for(const s of e.genres)a[s.id]=s.name}(await e.json()),a},o=t("cyIMT"),d=t("bTcpz");let l,f=1;let c,u,g,m,L,p;async function h(){await n(),m=`https://api.themoviedb.org/3/trending/movie/day?api_key=${i.key}`,await v(1),P(),w(),_(),y()}async function v(e){l=e,L=`${m}&page=${e}`;try{g=await(0,o.default)(L),0!==g.total_results?(c=g.total_pages,function(e){let s;for(const r of e.results){if(null===r.poster_path?(r.posterPath="https://upload.wikimedia.org/wikipedia/commons/a/a1",r.poster_path="/Out_Of_Poster.jpg"):r.posterPath="https://image.tmdb.org/t/p/w500",r.genre_ids)for(let e=0;e<r.genre_ids.length;e+=1)r.genre_ids[e]=a[r.genre_ids[e]];else r.genre_ids=["absent"];r.release_date&&(s=r.release_date.slice(0,4),r.release_date=s)}}(g),function(e){i.refs.gallery.innerHTML="";const s=e.map((e=>`<li class="gallery__item" movie-index = ${e.id}>\n            <img class="film__poster" src="${e.posterPath}${e.poster_path}" alt="poster">\n            <h3 class="film__title">${e.original_title.slice(0,60)}</h3>\n            <p class="film__characteristics">${e.genre_ids.join(", ").slice(0,35)} | ${e.release_date}</p>\n        </li>`)).join("");i.refs.gallery.insertAdjacentHTML("beforeend",s)}(g.results),function(){1===l?N(i.refs.prevButton):E(i.refs.prevButton);l===c?N(i.refs.nextButton):E(i.refs.nextButton)}(),y(),(0,d.default)(g.results)):(i.refs.searchInfo.textContent="Search result not successful. Enter the correct movie name.",h())}catch(e){console.error(e)}}function b(e){const s=document.createElement("button");s.className="pagination-number",s.innerHTML=e,s.setAttribute("type","button"),s.setAttribute("page-index",e),s.setAttribute("aria-label","Page "+e),s.setAttribute("onclick","window.location.href='./index.html#gallery'"),i.refs.paginationNumbers.appendChild(s)}function P(){if(i.refs.paginationNumbers.innerHTML="",i.refs.nextButton.classList.remove("is-hidden"),i.refs.prevButton.classList.remove("is-hidden"),g.total_pages>5){i.refs.lastPage.classList.remove("is-hidden"),i.refs.dotsNext.classList.remove("is-hidden");for(let e=f;e<=5;e+=1)b(e)}else{i.refs.lastPage.classList.add("is-hidden"),i.refs.dotsNext.classList.add("is-hidden"),i.refs.firstPage.classList.add("is-hidden"),i.refs.dotsPrev.classList.add("is-hidden");for(let e=f;e<=g.total_pages;e+=1)b(e)}}function y(){document.querySelectorAll(".pagination-number").forEach((e=>{e.classList.remove("is-active");Number(e.getAttribute("page-index"))===l&&e.classList.add("is-active")}))}function N(e){e.classList.add("disabled"),e.setAttribute("disabled",!0)}function E(e){e.classList.remove("disabled"),e.removeAttribute("disabled")}function w(){document.querySelectorAll(".pagination-number").forEach((e=>{const s=Number(e.getAttribute("page-index"));s&&e.addEventListener("click",(()=>{v(s)}))}))}function x(e){if(i.refs.paginationNumbers.innerHTML="",l>1&&l<6&&i.refs.paginationNumbers.firstElementChild===document.querySelector(".pagination-number.is-active")){for(let e=1;e<6;e+=1)b(e);i.refs.dotsNext.classList.remove("is-hidden"),i.refs.lastPage.classList.remove("is-hidden")}else for(let s=e-5;s<e;s+=1)b(s+1)}function _(){i.refs.firstPage.setAttribute("page-index",1),i.refs.firstPage.setAttribute("aria-label","Page 1"),i.refs.firstPage.innerHTML=1,i.refs.lastPage.setAttribute("page-index",c),i.refs.lastPage.setAttribute("aria-label","Page "+c),i.refs.lastPage.innerHTML=c}function T(){i.refs.regModal.classList.add("is-hidden"),document.body.classList.remove("body-modal-open"),i.refs.regInfo.innerHTML="",i.refs.regLogin.value="",i.refs.regEmail.value="",i.refs.regPassword.value="",i.refs.regConfirmPassword.value="",i.refs.regLogin.classList.remove("error"),i.refs.regEmail.classList.remove("error"),i.refs.regPassword.classList.remove("error"),i.refs.regConfirmPassword.classList.remove("error")}function M(e){"Escape"===e.code&&T()}function A(e){e.currentTarget===e.target&&T()}function C(e){e.preventDefault();const{elements:{login:s,email:r,password:t,confirmPassword:a}}=e.currentTarget;if(""===s.value)return i.refs.regLogin.classList.add("error"),i.refs.regInfo.innerHTML="Please fill in all the fields!";if(""===r.value)return i.refs.regEmail.classList.add("error"),i.refs.regInfo.innerHTML="Please fill in all the fields!";if(""===t.value)return i.refs.regPassword.classList.add("error"),i.refs.regInfo.innerHTML="Please fill in all the fields!";if(t.value!==a.value||""===a.value)return i.refs.regPassword.classList.add("error"),i.refs.regConfirmPassword.classList.add("error"),i.refs.regInfo.innerHTML="Enter correct password";const n={login:s.value,email:r.value,password:t.value},o=JSON.parse(localStorage.getItem("users"))||[];return o.some((e=>e.email===n.email))?(i.refs.regEmail.classList.add("error"),i.refs.regInfo.innerHTML="Such a user already exists"):o.some((e=>e.login===n.login))?(i.refs.regLogin.classList.add("error"),i.refs.regInfo.innerHTML="This login is already in use"):(o.push(n),localStorage.setItem("users",JSON.stringify(o)),e.currentTarget.reset(),i.refs.regLogin.classList.remove("error"),i.refs.regEmail.classList.remove("error"),i.refs.regPassword.classList.remove("error"),i.refs.regConfirmPassword.classList.remove("error"),i.refs.regInfo.innerHTML="",void i.refs.regModal.classList.add("is-hidden"))}i.refs.prevButton.addEventListener("click",(()=>{!function(e){i.refs.paginationNumbers.firstElementChild===document.querySelector(".pagination-number.is-active")&&"1"!==i.refs.paginationNumbers.firstElementChild.innerHTML&&(x(e),w());Number(i.refs.paginationNumbers.lastElementChild.getAttribute("page-index"))===c-5&&(i.refs.dotsNext.classList.remove("is-hidden"),i.refs.lastPage.classList.remove("is-hidden"));5===Number(i.refs.paginationNumbers.lastElementChild.getAttribute("page-index"))&&(i.refs.firstPage.classList.add("is-hidden"),i.refs.dotsPrev.classList.add("is-hidden"))}(l-1),v(l-1)})),i.refs.nextButton.addEventListener("click",(()=>{!function(e){i.refs.paginationNumbers.lastElementChild===document.querySelector(".pagination-number.is-active")&&Number(i.refs.paginationNumbers.lastElementChild.getAttribute("page-index"))!==c&&(!function(e){if(i.refs.paginationNumbers.innerHTML="",5===l&&6===c){i.refs.dotsPrev.classList.remove("is-hidden");for(let s=e-4;s<l+2;s+=1)b(s)}else if(5===l&&7===c){i.refs.dotsPrev.classList.remove("is-hidden");for(let s=e-3;s<l+3;s+=1)b(s)}else if(5===l&&8===c){i.refs.dotsPrev.classList.remove("is-hidden");for(let s=e-2;s<l+4;s+=1)b(s)}else if(5===l&&9===c){i.refs.dotsPrev.classList.remove("is-hidden");for(let s=e-1;s<l+4;s+=1)b(s)}else for(let s=e;s<e+5;s+=1)b(s)}(e),w());l===c-1&&(x(e),y(),w(currentDataAll));6===Number(i.refs.paginationNumbers.firstElementChild.getAttribute("page-index"))&&(i.refs.firstPage.classList.remove("is-hidden"),i.refs.dotsPrev.classList.remove("is-hidden"));Number(i.refs.paginationNumbers.firstElementChild.getAttribute("page-index"))===c-5&&i.refs.dotsNext.classList.add("is-hidden");Number(i.refs.paginationNumbers.firstElementChild.getAttribute("page-index"))===c-4&&(i.refs.lastPage.classList.add("is-hidden"),i.refs.dotsNext.classList.add("is-hidden"))}(l+1),v(l+1)})),i.refs.firstPage.addEventListener("click",(function(){v(1),P(),w(),i.refs.lastPage.classList.remove("is-hidden"),i.refs.dotsNext.classList.remove("is-hidden"),i.refs.firstPage.classList.add("is-hidden"),i.refs.dotsPrev.classList.add("is-hidden")})),i.refs.lastPage.addEventListener("click",(function(){v(c),x(l),w(),i.refs.dotsNext.classList.add("is-hidden"),i.refs.dotsPrev.classList.remove("is-hidden"),i.refs.firstPage.classList.remove("is-hidden"),i.refs.lastPage.classList.add("is-hidden")})),i.refs.form.addEventListener("submit",(async function(e){e.preventDefault(),i.refs.searchIcon.classList.add("is-hidden"),i.refs.searchSpinner.classList.remove("is-hidden"),i.refs.gallery.innerHTML="",p=e.currentTarget,u=p.elements.searchQuery.value,f=1,i.refs.searchInfo.textContent="",m=`https://api.themoviedb.org/3/search/movie?api_key=${i.key}&query=${u}`,await v(f),P(),w(),_(),y(),i.refs.searchIcon.classList.remove("is-hidden"),i.refs.searchSpinner.classList.add("is-hidden")})),i.refs.regModalOpenBtn.addEventListener("click",(function(){i.refs.regModal.classList.remove("is-hidden"),document.body.classList.add("body-modal-open"),i.refs.regModalCloseBtn.addEventListener("click",T),window.addEventListener("keydown",M),i.refs.regModal.addEventListener("click",A),i.refs.regForm.addEventListener("submit",C)})),h();
//# sourceMappingURL=index.13fe6e56.js.map
