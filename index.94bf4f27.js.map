{"mappings":"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","sources":["src/index.js"],"sourcesContent":["const key = '4273054ff6f056d7541ef873941254f6';\nconst genresList = {};\nlet currentPage;\nlet page = 1;\nlet firstPage;\nlet lastPage;\n\nconst refs = {\n    gallery: document.querySelector('.gallery'),\n    paginationNumbers: document.querySelector('.pagination__current'),\n    nextButton: document.getElementById(\"next-button\"),\n    prevButton: document.getElementById(\"prev-button\"),\n    firstPage: document.querySelector(\".pagination__firstPage\"),\n    dotsPrev: document.querySelector(\".pagination__dotsPrev\"),\n    lastPage: document.querySelector(\".pagination__lastPage\"),\n    dotsNext: document.querySelector(\".pagination__dotsNext\"),\n}\n\nrefs.prevButton.addEventListener(\"click\", () => {\n    updatePaginationPrev(currentPage - 1);\n    setCurrentPage(currentPage - 1);\n});\n\nrefs.nextButton.addEventListener(\"click\", () => {\n    updatePaginationNext(currentPage + 1);\n    setCurrentPage(currentPage + 1);\n});\n\nrefs.firstPage.addEventListener('click', () => {\n    firstDownload();\n    refs.lastPage.classList.remove(\"is-hidden\");\n    refs.dotsNext.classList.remove(\"is-hidden\");\n})\n\nrefs.lastPage.addEventListener('click', downloadLastPage);\n\n\nwindow.addEventListener(\"load\", firstDownload());\n\n    \nfunction firstDownload() {\n    currentPage = page;\n    getPaginationNumbers(page);\n    addEventListenerAllBtns();\n    buttonsStatus();\n    handleActivePageNumber();\n\n    fetchRequestPopular(page)\n        .then(data => {\n            onMarkUp(data);\n            updateFirstLastPage(data);  \n    })\n}\n\nasync function fetchRequestPopular(page) {\n    const genresResponse = await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${key}&language=en-US`);\n    const response = await fetch(`https://api.themoviedb.org/3/trending/movie/day?api_key=${key}&page=${page}`);\n\n    const dataGenres = await genresResponse.json();\n    const data = await response.json();\n\n    makeGenresList(dataGenres);\n    updateDescription(data);\n\n    function makeGenresList(dataGenres) {\n        for (const genre of dataGenres.genres) {\n           genresList[genre.id] = genre.name;\n        }\n    }\n\n    function updateDescription (data) {\n        let releaseYear;\n        for (const pop of data.results) {\n            if (pop.genre_ids) {\n            for (let i = 0; i < pop.genre_ids.length; i+=1) {\n                pop.genre_ids[i] = genresList[pop.genre_ids[i]];\n    \n                releaseYear = pop.release_date.slice(0, 4);\n                pop.release_date = releaseYear;\n            }\n        }\n        }\n    }    \n    \n    return data;\n}\n\n\n\nfunction onMarkUp(data) {\n    refs.gallery.innerHTML=\"\";\n    const markup = data.results.map(card =>\n        `<li class=\"gallery__item\">\n            <img class=\"film__poster\" src=\"https://image.tmdb.org/t/p/w500${card.poster_path}\" alt=\"poster\">\n            <h3 class=\"film__title\">${card.original_title}</h3>\n            <p class=\"film__characteristics\">${card.genre_ids.join(\", \")} | ${card.release_date}</p>\n        </li>`)\n        .join(\"\");\n\n        refs.gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction setCurrentPage(page) {\n    currentPage = page;\n    fetchRequestPopular(page)\n        .then(data => {\n            onMarkUp(data);\n            updateFirstLastPage(data);\n            buttonsStatus();\n            handleActivePageNumber();\n    })\n}\n\nfunction appendPageNumber(index) {\n    const pageNumber = document.createElement(\"button\");\n    pageNumber.className = \"pagination-number\";\n    pageNumber.innerHTML = index;\n    pageNumber.setAttribute(\"page-index\", index);\n    pageNumber.setAttribute(\"aria-label\", \"Page \" + index);\n    refs.paginationNumbers.appendChild(pageNumber);\n}\n\nfunction getPaginationNumbers(page) {\n    refs.paginationNumbers.innerHTML = \"\";\n    refs.firstPage.classList.add(\"is-hidden\");\n    refs.dotsPrev.classList.add(\"is-hidden\");\n\n    for (let i = page; i <= 5; i += 1) {\n        appendPageNumber(i);\n    }\n}\n\nfunction handleActivePageNumber() {\n    document.querySelectorAll(\".pagination-number\").forEach((button) => {\n        button.classList.remove(\"is-active\");\n        \n        const pageIndex = Number(button.getAttribute(\"page-index\"));\n        if (pageIndex == currentPage) {\n          button.classList.add(\"is-active\");\n        }\n      });\n}\n\nfunction disableButton(button) {\n    button.classList.add(\"disabled\");\n    button.setAttribute(\"disabled\", true);\n};\n\nfunction enableButton(button) {\n    button.classList.remove(\"disabled\");\n    button.removeAttribute(\"disabled\");\n};\n\nfunction buttonsStatus() {\n    if (currentPage === 1) {\n        disableButton(refs.prevButton);\n    } else {\n        enableButton(refs.prevButton);\n    }\n\n    if (currentPage === lastPage) {\n        disableButton(refs.nextButton);\n    } else {\n        enableButton(refs.nextButton);\n    }\n};\n\nfunction addEventListenerAllBtns() {\n    document.querySelectorAll(\".pagination-number\").forEach((button) => {\n        const pageIndex = Number(button.getAttribute(\"page-index\"));\n        if (pageIndex) {\n          button.addEventListener(\"click\", () => {\n            setCurrentPage(pageIndex);\n          });\n        }\n    });\n}\n\nfunction getPaginationNumbersNext(page) {\n    refs.paginationNumbers.innerHTML = \"\";\n    for (let i = page; i < page + 5; i += 1) {\n        appendPageNumber(i);\n      }\n}\n\nfunction updatePaginationNext(page) {\n    if (refs.paginationNumbers.lastElementChild === document.querySelector('.pagination-number.is-active') && Number(refs.paginationNumbers.lastElementChild.getAttribute(\"page-index\")) !== lastPage) {\n        getPaginationNumbersNext(page);\n\n        document.querySelectorAll(\".pagination-number\").forEach((button) => {\n            const pageIndex = Number(button.getAttribute(\"page-index\"));\n            if (pageIndex) {\n              button.addEventListener(\"click\", () => {\n                setCurrentPage(pageIndex);\n              });\n            }\n          });    \n    }\n\n    if (Number(refs.paginationNumbers.firstElementChild.getAttribute(\"page-index\")) === 6) {\n        refs.firstPage.classList.remove(\"is-hidden\");\n        refs.dotsPrev.classList.remove(\"is-hidden\");\n    }\n    \n    if (Number(refs.paginationNumbers.firstElementChild.getAttribute(\"page-index\")) === lastPage - 5) {\n        refs.dotsNext.classList.add(\"is-hidden\");\n    }\n\n    if (Number(refs.paginationNumbers.firstElementChild.getAttribute(\"page-index\")) === lastPage - 4) {\n        refs.lastPage.classList.add(\"is-hidden\");\n        refs.dotsNext.classList.add(\"is-hidden\");\n    }\n}\n\nfunction getPaginationNumbersPrev(page) {\n    refs.paginationNumbers.innerHTML = \"\";\n    for (let i = page - 5; i < page; i += 1) {\n        appendPageNumber(i + 1);\n      }\n}\n\nfunction updatePaginationPrev(page) {\n    if (refs.paginationNumbers.firstElementChild === document.querySelector('.pagination-number.is-active') && refs.paginationNumbers.firstElementChild.innerHTML !== \"1\") {\n        getPaginationNumbersPrev(page);\n\n        document.querySelectorAll(\".pagination-number\").forEach((button) => {\n            const pageIndex = Number(button.getAttribute(\"page-index\"));\n            if (pageIndex) {\n              button.addEventListener(\"click\", () => {\n                setCurrentPage(pageIndex);\n              });\n            }\n        });    \n    }\n\n    if (Number(refs.paginationNumbers.lastElementChild.getAttribute(\"page-index\")) === lastPage - 5) {\n        refs.dotsNext.classList.remove(\"is-hidden\");\n        refs.lastPage.classList.remove(\"is-hidden\");\n    }\n\n    if (Number(refs.paginationNumbers.lastElementChild.getAttribute(\"page-index\")) === 5) {\n        refs.firstPage.classList.add(\"is-hidden\");\n        refs.dotsPrev.classList.add(\"is-hidden\");\n    }\n}\n\nfunction updateFirstLastPage(data) {\n    firstPage = 1;\n    refs.firstPage.setAttribute(\"page-index\", firstPage);\n    refs.firstPage.setAttribute(\"aria-label\", \"Page \" + firstPage);\n    refs.firstPage.innerHTML = firstPage;\n\n    lastPage = data.total_pages - 1;\n    refs.lastPage.setAttribute(\"page-index\", lastPage);\n    refs.lastPage.setAttribute(\"aria-label\", \"Page \" + lastPage);\n    refs.lastPage.innerHTML = lastPage;\n}\n\nfunction downloadLastPage() {\n    setCurrentPage(lastPage);\n    refs.dotsNext.classList.add(\"is-hidden\");\n    refs.dotsPrev.classList.remove(\"is-hidden\");\n    refs.firstPage.classList.remove(\"is-hidden\");\n    getPaginationNumbersPrev(currentPage);\n\n    document.querySelectorAll(\".pagination-number\").forEach((button) => {\n        const pageIndex = Number(button.getAttribute(\"page-index\"));\n        if (pageIndex) {\n          button.addEventListener(\"click\", () => {\n            setCurrentPage(pageIndex);\n          });\n        }\n    });    \n\n    refs.lastPage.classList.add(\"is-hidden\");\n}"],"names":["$1f0dc3b9307be026$var$genresList","$1f0dc3b9307be026$var$currentPage","$1f0dc3b9307be026$var$firstPage","$1f0dc3b9307be026$var$lastPage","$1f0dc3b9307be026$var$refs","gallery","document","querySelector","paginationNumbers","nextButton","getElementById","prevButton","firstPage","dotsPrev","lastPage","dotsNext","$1f0dc3b9307be026$var$firstDownload","page3","innerHTML","classList","add","i","$1f0dc3b9307be026$var$appendPageNumber","$1f0dc3b9307be026$var$getPaginationNumbers","querySelectorAll","forEach","button","pageIndex","Number","getAttribute","addEventListener","$1f0dc3b9307be026$var$setCurrentPage","$1f0dc3b9307be026$var$buttonsStatus","$1f0dc3b9307be026$var$handleActivePageNumber","$1f0dc3b9307be026$var$fetchRequestPopular","then","data","$1f0dc3b9307be026$var$onMarkUp","$1f0dc3b9307be026$var$updateFirstLastPage","async","page1","genresResponse","fetch","response","dataGenres1","json","data1","dataGenres","genre","genres","id","name","makeGenresList","releaseYear","pop","results","genre_ids","length","release_date","slice","updateDescription","markup","map","card","poster_path","original_title","join","insertAdjacentHTML","page2","index","pageNumber","createElement","className","setAttribute","appendChild","remove","$1f0dc3b9307be026$var$disableButton","$1f0dc3b9307be026$var$enableButton","removeAttribute","$1f0dc3b9307be026$var$getPaginationNumbersPrev","page6","total_pages","page7","firstElementChild","lastElementChild","$1f0dc3b9307be026$var$updatePaginationPrev","page5","page4","$1f0dc3b9307be026$var$getPaginationNumbersNext","$1f0dc3b9307be026$var$updatePaginationNext","window"],"version":3,"file":"index.94bf4f27.js.map"}