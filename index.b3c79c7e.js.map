{"mappings":"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","sources":["src/index1.js"],"sourcesContent":["const key = '4273054ff6f056d7541ef873941254f6';\nconst genresList = {};\nlet currentPage;\nlet page = 1;\nlet lastPage;\nlet data;\n\nconst refs = {\n    gallery: document.querySelector('.gallery'),\n    paginationNumbers: document.querySelector('.pagination__current'),\n    nextButton: document.getElementById(\"next-button\"),\n    prevButton: document.getElementById(\"prev-button\"),\n    firstPage: document.querySelector(\".pagination__firstPage\"),\n    dotsPrev: document.querySelector(\".pagination__dotsPrev\"),\n    lastPage: document.querySelector(\".pagination__lastPage\"),\n    dotsNext: document.querySelector(\".pagination__dotsNext\"),\n}\n\nrefs.prevButton.addEventListener(\"click\", () => {\n    updatePaginationPrev(currentPage - 1);\n    setCurrentPage(currentPage - 1);\n});\n\nrefs.nextButton.addEventListener(\"click\", () => {\n    updatePaginationNext(currentPage + 1);\n    setCurrentPage(currentPage + 1);\n});\n\nrefs.firstPage.addEventListener('click', () => {\n    firstDownload();\n    refs.lastPage.classList.remove(\"is-hidden\");\n    refs.dotsNext.classList.remove(\"is-hidden\");\n})\n\nrefs.lastPage.addEventListener('click', downloadLastPage);\n\n\nwindow.addEventListener(\"load\", firstDownload());\n    \nasync function firstDownload() {\n    try {\n        const genresList = await makeGenresList();\n        setCurrentPage(1)\n        .then(data => {\n        getPaginationNumbers(page);\n        addEventListenerAllBtns();\n        onMarkUp(data);\n        updateFirstLastPage(data);\n        buttonsStatus();\n        handleActivePageNumber();\n        })\n    } catch (error) {\n        console.log(error.message);}\n}\n\nasync function fetchRequestGenres() {\n    const response = await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${key}&language=en-US`);\n    const dataGenres = await response.json();\n    return dataGenres;\n}\n\nasync function makeGenresList() {\n    try {\n        const dataGenres = await fetchRequestGenres();\n        for (genre of dataGenres.genres) {\n            genresList[genre.id] = genre.name;\n        }\n\n        return genresList;\n        \n    } catch (error) {console.log(error.message);}\n}\n\nasync function fetchRequestPopular(page) {\n    const response = await fetch(`https://api.themoviedb.org/3/trending/movie/day?api_key=${key}&page=${page}`);\n    const data = await response.json();\n    return data;\n}\n\nfunction updateDescription (data) {\n    let releaseYear;\n    for (pop of data.results) {\n        if (pop.genre_ids) {\n        for (let i = 0; i < pop.genre_ids.length; i+=1) {\n            pop.genre_ids[i] = genresList[pop.genre_ids[i]];\n\n            releaseYear = pop.release_date.slice(0, 4);\n            pop.release_date = releaseYear;\n        }\n    }\n    }\n}\n\nasync function setCurrentPage(page) {\n    currentPage = page;\n\n    try {\n        data = await fetchRequestPopular(page);\n        updateDescription(data);\n        console.log(data);\n        return data;\n    } catch (error) {console.log(error.message);}\n}\n\nfunction onMarkUp(data) {\n    console.log(data);\n    refs.gallery.innerHTML=\"\";\n    markup = data.results.map(card =>\n        `<li class=\"gallery__item\">\n            <img class=\"film__poster\" src=\"https://image.tmdb.org/t/p/w500${card.poster_path}\" alt=\"poster\">\n            <h3 class=\"film__title\">${card.original_title}</h3>\n            <p class=\"film__characteristics\">${card.genre_ids.join(\", \")} | ${card.release_date}</p>\n        </li>`)\n        .join(\"\");\n\n        refs.gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction appendPageNumber(index) {\n    const pageNumber = document.createElement(\"button\");\n    pageNumber.className = \"pagination-number\";\n    pageNumber.innerHTML = index;\n    pageNumber.setAttribute(\"page-index\", index);\n    pageNumber.setAttribute(\"aria-label\", \"Page \" + index);\n    refs.paginationNumbers.appendChild(pageNumber);\n}\n\nfunction getPaginationNumbers(page) {\n    refs.paginationNumbers.innerHTML = \"\";\n    refs.firstPage.classList.add(\"is-hidden\");\n    refs.dotsPrev.classList.add(\"is-hidden\");\n\n    for (let i = page; i <= 5; i += 1) {\n        appendPageNumber(i);\n    }\n}\n\nfunction handleActivePageNumber() {\n    document.querySelectorAll(\".pagination-number\").forEach((button) => {\n        button.classList.remove(\"is-active\");\n        \n        const pageIndex = Number(button.getAttribute(\"page-index\"));\n        if (pageIndex == currentPage) {\n          button.classList.add(\"is-active\");\n        }\n      });\n}\n\nfunction addEventListenerAllBtns() {\n    document.querySelectorAll(\".pagination-number\").forEach((button) => {\n        const pageIndex = Number(button.getAttribute(\"page-index\"));\n        if (pageIndex) {\n          button.addEventListener(\"click\", () => {\n            setCurrentPage(pageIndex);\n          });\n        }\n    });\n}\n\nfunction getPaginationNumbersNext(page) {\n    refs.paginationNumbers.innerHTML = \"\";\n    for (let i = page; i < page + 5; i += 1) {\n        appendPageNumber(i);\n      }\n}\n\nfunction getPaginationNumbersPrev(page) {\n    refs.paginationNumbers.innerHTML = \"\";\n    for (let i = page - 5; i < page; i += 1) {\n        appendPageNumber(i + 1);\n      }\n}\n\nfunction disableButton(button) {\n    button.classList.add(\"disabled\");\n    button.setAttribute(\"disabled\", true);\n};\n\nfunction enableButton(button) {\n    button.classList.remove(\"disabled\");\n    button.removeAttribute(\"disabled\");\n};\n\nfunction buttonsStatus() {\n    if (currentPage === 1) {\n        disableButton(refs.prevButton);\n    } else {\n        enableButton(refs.prevButton);\n    }\n\n    if (currentPage === lastPage) {\n        disableButton(refs.nextButton);\n    } else {\n        enableButton(refs.nextButton);\n    }\n};\n\nfunction updatePaginationNext(page) {\n    if (refs.paginationNumbers.lastElementChild === document.querySelector('.pagination-number.is-active') && Number(refs.paginationNumbers.lastElementChild.getAttribute(\"page-index\")) !== lastPage) {\n        getPaginationNumbersNext(page);\n\n        document.querySelectorAll(\".pagination-number\").forEach((button) => {\n            const pageIndex = Number(button.getAttribute(\"page-index\"));\n            if (pageIndex) {\n              button.addEventListener(\"click\", () => {\n                setCurrentPage(pageIndex);\n              });\n            }\n          });    \n    }\n\n    if (Number(refs.paginationNumbers.firstElementChild.getAttribute(\"page-index\")) === 6) {\n        refs.firstPage.classList.remove(\"is-hidden\");\n        refs.dotsPrev.classList.remove(\"is-hidden\");\n    }\n    \n    if (Number(refs.paginationNumbers.firstElementChild.getAttribute(\"page-index\")) === lastPage - 5) {\n        refs.dotsNext.classList.add(\"is-hidden\");\n    }\n\n    if (Number(refs.paginationNumbers.firstElementChild.getAttribute(\"page-index\")) === lastPage - 4) {\n        refs.lastPage.classList.add(\"is-hidden\");\n        refs.dotsNext.classList.add(\"is-hidden\");\n    }\n}\n    \nfunction updatePaginationPrev(page) {\n    if (refs.paginationNumbers.firstElementChild === document.querySelector('.pagination-number.is-active') && refs.paginationNumbers.firstElementChild.innerHTML !== \"1\") {\n        getPaginationNumbersPrev(page);\n\n        document.querySelectorAll(\".pagination-number\").forEach((button) => {\n            const pageIndex = Number(button.getAttribute(\"page-index\"));\n            if (pageIndex) {\n              button.addEventListener(\"click\", () => {\n                setCurrentPage(pageIndex);\n              });\n            }\n        });    \n    }\n\n    if (Number(refs.paginationNumbers.lastElementChild.getAttribute(\"page-index\")) === lastPage - 5) {\n        refs.dotsNext.classList.remove(\"is-hidden\");\n        refs.lastPage.classList.remove(\"is-hidden\");\n    }\n\n    if (Number(refs.paginationNumbers.lastElementChild.getAttribute(\"page-index\")) === 5) {\n        refs.firstPage.classList.add(\"is-hidden\");\n        refs.dotsPrev.classList.add(\"is-hidden\");\n    }\n}\n\nfunction updateFirstLastPage(data) {\n    firstPage = 1;\n    refs.firstPage.setAttribute(\"page-index\", firstPage);\n    refs.firstPage.setAttribute(\"aria-label\", \"Page \" + firstPage);\n    refs.firstPage.innerHTML = firstPage;\n\n    lastPage = data.total_pages - 1;\n    refs.lastPage.setAttribute(\"page-index\", lastPage);\n    refs.lastPage.setAttribute(\"aria-label\", \"Page \" + lastPage);\n    refs.lastPage.innerHTML = lastPage;\n}\n\nfunction downloadLastPage() {\n    setCurrentPage(lastPage);\n    refs.dotsNext.classList.add(\"is-hidden\");\n    refs.dotsPrev.classList.remove(\"is-hidden\");\n    refs.firstPage.classList.remove(\"is-hidden\");\n    getPaginationNumbersPrev(currentPage);\n\n    document.querySelectorAll(\".pagination-number\").forEach((button) => {\n        const pageIndex = Number(button.getAttribute(\"page-index\"));\n        if (pageIndex) {\n          button.addEventListener(\"click\", () => {\n            setCurrentPage(pageIndex);\n          });\n        }\n    });    \n\n    refs.lastPage.classList.add(\"is-hidden\");\n}"],"names":["$8929c9c422391661$var$genresList","$8929c9c422391661$var$currentPage","$8929c9c422391661$var$lastPage","$8929c9c422391661$var$data","$8929c9c422391661$var$refs","gallery","document","querySelector","paginationNumbers","nextButton","getElementById","prevButton","firstPage","dotsPrev","lastPage","dotsNext","async","$8929c9c422391661$var$firstDownload","dataGenres","response","fetch","json","$8929c9c422391661$var$fetchRequestGenres","genre","genres","id","name","error","console","log","message","$8929c9c422391661$var$makeGenresList","$8929c9c422391661$var$setCurrentPage","then","data1","data4","data5","page3","innerHTML","classList","add","i","$8929c9c422391661$var$appendPageNumber","$8929c9c422391661$var$getPaginationNumbers","querySelectorAll","forEach","button","pageIndex","Number","getAttribute","addEventListener","markup","results","map","card","poster_path","original_title","genre_ids","join","release_date","insertAdjacentHTML","setAttribute","total_pages","$8929c9c422391661$var$disableButton","$8929c9c422391661$var$enableButton","$8929c9c422391661$var$buttonsStatus","remove","page2","page1","$8929c9c422391661$var$fetchRequestPopular","data3","releaseYear","pop","length","slice","$8929c9c422391661$var$updateDescription","index","pageNumber","createElement","className","appendChild","$8929c9c422391661$var$getPaginationNumbersPrev","page5","removeAttribute","page7","firstElementChild","lastElementChild","$8929c9c422391661$var$updatePaginationPrev","page6","page4","$8929c9c422391661$var$getPaginationNumbersNext","$8929c9c422391661$var$updatePaginationNext","window"],"version":3,"file":"index.b3c79c7e.js.map"}