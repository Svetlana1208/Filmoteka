const e={gallery:document.querySelector(".gallery"),paginationNumbers:document.querySelector(".pagination__current"),nextButton:document.getElementById("next-button"),prevButton:document.getElementById("prev-button"),firstPage:document.querySelector(".pagination__firstPage"),dotsPrev:document.querySelector(".pagination__dotsPrev"),lastPage:document.querySelector(".pagination__lastPage"),dotsNext:document.querySelector(".pagination__dotsNext"),form:document.querySelector(".search__form"),searchIcon:document.querySelector(".search__icon"),searchSpinner:document.querySelector(".spinner"),searchInfo:document.querySelector(".search__info"),movieCardBox:document.querySelector(".movieCard__box"),modal:document.querySelector("[data-modal]"),closeModalBtn:document.querySelector("[data-modal-close]")},t={};var i=async()=>{const e=await fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=4273054ff6f056d7541ef873941254f6&language=en-US");return function(e){for(const i of e.genres)t[i.id]=i.name}(await e.json()),t};var s=async e=>{try{const t=await fetch(e);return await t.json()}catch(e){console.error(e)}};const a={watchedBtn:document.querySelector("[data-watched-button]"),queueBtn:document.querySelector("[data-queue-button]"),gallery:document.querySelector(".myLibGallery"),information:document.querySelector(".information"),movieCardBox:document.querySelector(".movieCard__box"),modal:document.querySelector("[data-modal]"),closeModalBtn:document.querySelector("[data-modal-close]"),paginationNumbers:document.querySelector(".pagination__current"),nextButton:document.getElementById("next-button"),prevButton:document.getElementById("prev-button"),firstPage:document.querySelector(".pagination__firstPage"),dotsPrev:document.querySelector(".pagination__dotsPrev"),lastPage:document.querySelector(".pagination__lastPage"),dotsNext:document.querySelector(".pagination__dotsNext")};var n=()=>{const e=JSON.parse(localStorage.getItem("watchedList"))||[];e.push(movie),localStorage.setItem("watchedList",JSON.stringify(e))};var o=()=>{const e=JSON.parse(localStorage.getItem("queue"))||[];e.push(movie),localStorage.setItem("queue",JSON.stringify(e))};let r,d=1;let c,l,u,m,v;async function g(){await i(),m="https://api.themoviedb.org/3/trending/movie/day?api_key=4273054ff6f056d7541ef873941254f6",await p(1),_(),L(),x(),f()}async function p(i){r=i,v=`${m}&page=${i}`;try{u=await s(v),0!==u.total_results?(c=u.total_pages,function(e){let i;for(const s of e.results){if(null===s.poster_path?(s.posterPath="https://upload.wikimedia.org/wikipedia/commons/a/a1",s.poster_path="/Out_Of_Poster.jpg"):s.posterPath="https://image.tmdb.org/t/p/w500",s.genre_ids)for(let e=0;e<s.genre_ids.length;e+=1)s.genre_ids[e]=t[s.genre_ids[e]];else s.genre_ids=["absent"];s.release_date&&(i=s.release_date.slice(0,4),s.release_date=i)}}(u),function(t){e.gallery.innerHTML="";const i=t.map((e=>`<li class="gallery__item" movie-index = ${e.id}>\n            <img class="film__poster" src="${e.posterPath}${e.poster_path}" alt="poster">\n            <h3 class="film__title">${e.original_title}</h3>\n            <p class="film__characteristics">${e.genre_ids.join(", ")} | ${e.release_date}</p>\n        </li>`)).join("");e.gallery.insertAdjacentHTML("beforeend",i)}(u.results),function(){1===r?b(e.prevButton):y(e.prevButton);r===c?b(e.nextButton):y(e.nextButton)}(),f(),d=u.results,document.querySelectorAll(".gallery__item").forEach((t=>{t.addEventListener("click",(()=>{movieIndex=Number(t.getAttribute("movie-index")),d.forEach((t=>{if(t.id===movieIndex){movie=t;const i=`<article class="movie">\n                            <div>\n                                <img class="movie__poster" src="${movie.posterPath}${movie.poster_path}" alt="poster">\n                            </div>\n                            <div class="movie__box">\n                                <h3 class="movie__title">${movie.original_title}</h3>\n                                <ul>\n                                    <li class="movie__characteristic">\n                                        <p class="movie__characteristicKey">Vote / Votes</p>\n                                        <div class="vote__average">${movie.vote_average}</div><span>&nbsp / &nbsp</span>\n                                        <div class="vote__count">${movie.vote_count}</div>\n                                    </li>\n                                    <li class="movie__characteristic">\n                                        <p class="movie__characteristicKey">Popularity</p>\n                                        <p class="movie__characteristicValue">${movie.popularity}</p>\n                                    </li>\n                                    <li class="movie__characteristic">\n                                        <p class="movie__characteristicKey">Original Title</p>\n                                        <p class="movie__characteristicValue">${movie.original_title}</p>\n                                    </li>\n                                    <li class="movie__characteristic">\n                                        <p class="movie__characteristicKey">Genre</p>\n                                        <p class="movie__characteristicValue">${movie.genre_ids.join(", ")}</p>    \n                                    </li>\n                                </ul>    \n                                <p class="movie__about">About</p>\n                                <p class="movie__description">${movie.overview}</p>\n                                <div class="movie__btnBox">\n                                    <button class="movie__btn is-active" type="button" data-add-to-watched>add to Watched</button>\n                                    <button class="movie__btn" type="button" data-add-to-queue>add to queue</button>\n                                </div>\n                            </div>\n                        </article>`;e.movieCardBox.innerHTML=i,e.modal.classList.remove("is-hidden"),a.movieCardBox.innerHTML=i,a.modal.classList.remove("is-hidden"),document.body.classList.add("body-modal-open"),document.querySelector("[data-add-to-watched]").addEventListener("click",n),document.querySelector("[data-add-to-queue]").addEventListener("click",o)}}))}))}))):(e.searchInfo.textContent="Search result not successful. Enter the correct movie name.",g())}catch(e){console.error(e)}var d}function h(t){const i=document.createElement("button");i.className="pagination-number",i.innerHTML=t,i.setAttribute("type","button"),i.setAttribute("page-index",t),i.setAttribute("aria-label","Page "+t),i.setAttribute("onclick","window.location.href='./index.html#gallery'"),e.paginationNumbers.appendChild(i)}function _(){if(e.paginationNumbers.innerHTML="",e.nextButton.classList.remove("is-hidden"),e.prevButton.classList.remove("is-hidden"),u.total_pages>5){e.lastPage.classList.remove("is-hidden"),e.dotsNext.classList.remove("is-hidden");for(let e=d;e<=5;e+=1)h(e)}else{e.lastPage.classList.add("is-hidden"),e.dotsNext.classList.add("is-hidden"),e.firstPage.classList.add("is-hidden"),e.dotsPrev.classList.add("is-hidden");for(let e=d;e<=u.total_pages;e+=1)h(e)}}function f(){document.querySelectorAll(".pagination-number").forEach((e=>{e.classList.remove("is-active");Number(e.getAttribute("page-index"))===r&&e.classList.add("is-active")}))}function b(e){e.classList.add("disabled"),e.setAttribute("disabled",!0)}function y(e){e.classList.remove("disabled"),e.removeAttribute("disabled")}function L(){document.querySelectorAll(".pagination-number").forEach((e=>{const t=Number(e.getAttribute("page-index"));t&&e.addEventListener("click",(()=>{p(t)}))}))}function P(t){if(e.paginationNumbers.innerHTML="",r>1&&r<6&&e.paginationNumbers.firstElementChild===document.querySelector(".pagination-number.is-active")){for(let e=1;e<6;e+=1)h(e);e.dotsNext.classList.remove("is-hidden"),e.lastPage.classList.remove("is-hidden")}else for(let e=t-5;e<t;e+=1)h(e+1)}function x(){e.firstPage.setAttribute("page-index",1),e.firstPage.setAttribute("aria-label","Page 1"),e.firstPage.innerHTML=1,e.lastPage.setAttribute("page-index",c),e.lastPage.setAttribute("aria-label","Page "+c),e.lastPage.innerHTML=c}e.prevButton.addEventListener("click",(()=>{!function(t){e.paginationNumbers.firstElementChild===document.querySelector(".pagination-number.is-active")&&"1"!==e.paginationNumbers.firstElementChild.innerHTML&&(P(t),L());Number(e.paginationNumbers.lastElementChild.getAttribute("page-index"))===c-5&&(e.dotsNext.classList.remove("is-hidden"),e.lastPage.classList.remove("is-hidden"));5===Number(e.paginationNumbers.lastElementChild.getAttribute("page-index"))&&(e.firstPage.classList.add("is-hidden"),e.dotsPrev.classList.add("is-hidden"))}(r-1),p(r-1)})),e.nextButton.addEventListener("click",(()=>{!function(t){e.paginationNumbers.lastElementChild===document.querySelector(".pagination-number.is-active")&&Number(e.paginationNumbers.lastElementChild.getAttribute("page-index"))!==c&&(!function(t){if(e.paginationNumbers.innerHTML="",5===r&&6===c){e.dotsPrev.classList.remove("is-hidden");for(let e=t-4;e<r+2;e+=1)h(e)}else if(5===r&&7===c){e.dotsPrev.classList.remove("is-hidden");for(let e=t-3;e<r+3;e+=1)h(e)}else if(5===r&&8===c){e.dotsPrev.classList.remove("is-hidden");for(let e=t-2;e<r+4;e+=1)h(e)}else if(5===r&&9===c){e.dotsPrev.classList.remove("is-hidden");for(let e=t-1;e<r+4;e+=1)h(e)}else for(let e=t;e<t+5;e+=1)h(e)}(t),L());r===c-1&&(P(t),f(),L(currentDataAll));6===Number(e.paginationNumbers.firstElementChild.getAttribute("page-index"))&&(e.firstPage.classList.remove("is-hidden"),e.dotsPrev.classList.remove("is-hidden"));Number(e.paginationNumbers.firstElementChild.getAttribute("page-index"))===c-5&&e.dotsNext.classList.add("is-hidden");Number(e.paginationNumbers.firstElementChild.getAttribute("page-index"))===c-4&&(e.lastPage.classList.add("is-hidden"),e.dotsNext.classList.add("is-hidden"))}(r+1),p(r+1)})),e.firstPage.addEventListener("click",(function(){p(1),_(),L(),e.lastPage.classList.remove("is-hidden"),e.dotsNext.classList.remove("is-hidden"),e.firstPage.classList.add("is-hidden"),e.dotsPrev.classList.add("is-hidden")})),e.lastPage.addEventListener("click",(function(){p(c),P(r),L(),e.dotsNext.classList.add("is-hidden"),e.dotsPrev.classList.remove("is-hidden"),e.firstPage.classList.remove("is-hidden"),e.lastPage.classList.add("is-hidden")})),e.form.addEventListener("submit",(async function(t){t.preventDefault(),e.searchIcon.classList.add("is-hidden"),e.searchSpinner.classList.remove("is-hidden"),e.gallery.innerHTML="",form=t.currentTarget,l=form.elements.searchQuery.value,d=1,e.searchInfo.textContent="",m=`https://api.themoviedb.org/3/search/movie?api_key=4273054ff6f056d7541ef873941254f6&query=${l}`,await p(d),_(),L(),x(),f(),e.searchIcon.classList.remove("is-hidden"),e.searchSpinner.classList.add("is-hidden")})),e.closeModalBtn.addEventListener("click",(()=>{e.modal.classList.add("is-hidden"),document.body.classList.remove("body-modal-open")})),e.modal.addEventListener("click",(()=>{e.modal.classList.add("is-hidden"),document.body.classList.remove("body-modal-open")})),g();
//# sourceMappingURL=index.659d1d37.js.map
