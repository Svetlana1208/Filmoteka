{"mappings":"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","sources":["src/index1.js"],"sourcesContent":["const key = '4273054ff6f056d7541ef873941254f6';\nconst genresList = {};\n\nconst refs = {\n    gallery: document.querySelector('.gallery'),\n    pag: document.querySelector('.pagination'),\n    ulEl: document.querySelector('.pagination__current'),\n    prevRange: document.querySelector('.pagination__previousPage'),\n    nextRange: document.querySelector('.pagination__nextPage'),\n    nextButton: document.getElementById(\"next-button\"),\n    prevButton: document.getElementById(\"prev-button\"),\n}\n\n\nfirstDownload(1);\n\nasync function fetchRequestGenres() {\n    const response = await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${key}&language=en-US`);\n    const dataGenres = await response.json();\n    return dataGenres;\n}\n\nfunction makeGenresList(dataGenres) {\n    for (genre of dataGenres.genres) {\n        genresList[genre.id] = genre.name;\n    }\n}\n\nasync function fetchRequestPopular(page) {\n    const response = await fetch(`https://api.themoviedb.org/3/trending/movie/day?api_key=${key}&page=${page}`);\n    const data = await response.json();\n    return data;\n}\n\nfunction updateDescription (data) {\n    let releaseYear;\n\n    for (pop of data.results) {\n        for (let i = 0; i < pop.genre_ids.length; i+=1) {\n            pop.genre_ids[i] = genresList[pop.genre_ids[i]];\n\n            releaseYear = pop.release_date.slice(0, 4);\n            pop.release_date = releaseYear;\n        }\n    }\n}\n\nfunction onMarkUp(data) {\n    markup = data.results.map(card =>\n        `<li class=\"gallery__item\">\n            <img class=\"film__poster\" src=\"https://image.tmdb.org/t/p/w500${card.poster_path}\" alt=\"poster\">\n            <h3 class=\"film__title\">${card.original_title}</h3>\n            <p class=\"film__characteristics\">${card.genre_ids.join(\", \")} | ${card.release_date}</p>\n        </li>`)\n        .join(\"\");\n\n        refs.gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nasync function firstDownload(currentPage) {\n    const dataGenres = await fetchRequestGenres();\n    makeGenresList(dataGenres);\n\n    const data = await fetchRequestPopular(1);\n    \n        updateDescription(data);\n        onMarkUp(data);\n        console.log(data);\n\n        pagination(data);\n        buttonsStatus();\n\n    refs.prevRange.addEventListener('click', downloadPreviousPage);\n    refs.nextRange.addEventListener('click', downloadNextPage);\n\n\n    function pagination() {\n        for (let i = 0; i < 5; i += 1) {\n            const liEl = displayPaginationBtn(i + 1);\n            refs.ulEl.appendChild(liEl);\n        }\n    }\n    \n    function displayPaginationBtn(page) {\n        const liEl = document.createElement(\"li\");\n        liEl.classList.add('pagination__item');\n        liEl.innerText = page;\n    \n        if (currentPage == page) liEl.classList.add('pagination__item--active');\n    \n        liEl.addEventListener('click', () => {\n          currentPage = page;\n          fetchRequestPopular(page)\n          .then(data => {\n            updateDescription(data);\n            refs.gallery.innerHTML=\"\";\n            onMarkUp(data);\n            buttonsStatus();\n        });\n    \n          let currentItemLi = document.querySelector('li.pagination__item--active');\n          currentItemLi.classList.remove('pagination__item--active');\n    \n          liEl.classList.add('pagination__item--active');\n        })\n\n        return liEl;\n    }\n\n    function disableButton(button) {\n        button.classList.add(\"disabled\");\n        button.setAttribute(\"disabled\", true);\n    };\n\n    function enableButton(button) {\n        button.classList.remove(\"disabled\");\n        button.removeAttribute(\"disabled\");\n    };\n\n    function buttonsStatus() {\n        if (currentPage === 1) {\n            disableButton(refs.prevButton);\n        } else {\n            enableButton(refs.prevButton);\n        }\n\n        if (data.total_pages === currentPage) {\n            disableButton(refs.nextButton);\n        } else {\n            enableButton(refs.nextButton);\n        }\n    };\n\n\n    function downloadPreviousPage() {\n\n        page = currentPage - 1;\n        currentPage = page;\n\n        // pagination();\n        // test();\n\n        // updatePaginationPrevious();\n\n        fetchRequestPopular(page)\n            .then(data => {\n            updateDescription(data);\n            refs.gallery.innerHTML=\"\";\n            onMarkUp(data);\n            buttonsStatus();\n        });\n\n        displayActiveBtnPrev();\n    } \n\n    function displayActiveBtnPrev() {\n        let currentItemLi = document.querySelector('li.pagination__item--active');\n        currentItemLi.setAttribute(\"active\", true);\n\n        if (!refs.ulEl.firstElementChild.hasAttribute(\"active\")) {\n            let previousItemLi = currentItemLi.previousSibling;\n            currentItemLi.classList.remove('pagination__item--active');\n            previousItemLi.classList.add('pagination__item--active');\n            previousItemLi.setAttribute(\"active\", true);\n        } \n    } \n\n    function updatePaginationPrevious() {\n        if (refs.ulEl.firstChild.hasAttribute(\"active\") && !refs.prevButton.hasAttribute(\"disabled\")) {\n            refs.ulEl.firstChild.innerText = currentPage;\n            refs.ulEl.firstChild.nextSibling.innerText = currentPage + 1;\n            refs.ulEl.firstChild.nextSibling.nextSibling.innerText = currentPage + 2;\n            refs.ulEl.firstChild.nextSibling.nextSibling.nextSibling.innerText = currentPage + 3;\n            refs.ulEl.firstChild.nextSibling.nextSibling.nextSibling.nextSibling.innerText = currentPage + 4;\n        }\n    }\n\n\n\n\n\n    function downloadNextPage() {\n        refs.ulEl.innerHTML = \"\";\n\n        page = currentPage + 1;\n        currentPage = page;\n        // console.log(page);\n        // console.log(currentPage);\n\n        pagination();\n\n        // test();\n\n        // updatePaginationNext();\n\n        fetchRequestPopular(page)\n            .then(data => {\n            updateDescription(data);\n            refs.gallery.innerHTML=\"\";\n            onMarkUp(data);\n            buttonsStatus();\n            });\n\n            // displayActiveBtnNext();\n\n    \n        \n    }\n\n    function displayActiveBtnNext() {\n        let currentItemLi = document.querySelector('li.pagination__item--active');\n        currentItemLi.setAttribute(\"active\", true);\n\n        if (!refs.ulEl.lastElementChild.hasAttribute(\"active\")) {\n          let nextItemLi = currentItemLi.nextSibling;\n          currentItemLi.classList.remove('pagination__item--active');\n          currentItemLi.removeAttribute(\"active\");\n          nextItemLi.classList.add('pagination__item--active');\n          nextItemLi.setAttribute(\"active\", true);\n        }  \n    }\n    \n    function updatePaginationNext() {\n        if (refs.ulEl.lastElementChild.hasAttribute(\"active\") && currentPage !== data.total_pages) {\n            refs.ulEl.lastElementChild.innerText = currentPage;\n            refs.ulEl.lastElementChild.previousSibling.innerText = currentPage - 1;\n            refs.ulEl.lastElementChild.previousSibling.previousSibling.innerText = currentPage - 2;\n            refs.ulEl.lastElementChild.previousSibling.previousSibling.previousSibling.innerText = currentPage - 3;\n            refs.ulEl.lastElementChild.previousSibling.previousSibling.previousSibling.previousSibling.innerText = currentPage - 4;\n        }\n    }\n\n    function test() {\n        const aaa = document.querySelector('li.pagination__item--active');\n        aaa.innerText = currentPage;\n        // if (aaa.previousElementSibling) {\n        //     aaa.previousElementSibling.innerText = currentPage - 1;\n        // }\n        // if (aaa.previousElementSibling.previousSibling) {aaa.previousElementSibling.previousSibling.innerText = currentPage - 2};\n        // if (aaa.previousElementSibling.previousSibling.previousSibling) {aaa.previousElementSibling.previousSibling.previousSibling.innerText = currentPage - 3;}\n        // if (aaa.previousElementSibling.previousSibling.previousSibling.previousSibling) {aaa.previousElementSibling.previousSibling.previousSibling.previousSibling.innerText = currentPage - 4};\n        if (aaa.nextElementSibling) {\n            aaa.nextElementSibling.innerText = currentPage + 1;\n        }\n        // if (aaa.nextElementSibling.nextSibling) {aaa.nextElementSibling.nextSibling.innerText = currentPage + 2};\n        // if (aaa.nextElementSibling.nextSibling.nextSibling) {aaa.nextElementSibling.nextSibling.nextSibling.innerText = currentPage + 3};\n        // if (aaa.nextElementSibling.nextSibling.nextSibling.nextSibling) {aaa.nextElementSibling.nextSibling.nextSibling.nextSibling.innerText = currentPage + 4};\n}\n}\n"],"names":["$8929c9c422391661$var$genresList","$8929c9c422391661$var$refs","gallery","document","querySelector","pag","ulEl","prevRange","nextRange","nextButton","getElementById","prevButton","async","$8929c9c422391661$var$fetchRequestPopular","page","response","fetch","json","$8929c9c422391661$var$updateDescription","data","releaseYear","pop","results","i","genre_ids","length","release_date","slice","$8929c9c422391661$var$onMarkUp","markup","map","card","poster_path","original_title","join","insertAdjacentHTML","currentPage","dataGenres","genre","genres","id","name","$8929c9c422391661$var$makeGenresList","$8929c9c422391661$var$fetchRequestGenres","data1","pagination","liEl","displayPaginationBtn","appendChild","createElement","classList","add","innerText","addEventListener","then","innerHTML","buttonsStatus","remove","disableButton","button","setAttribute","enableButton","removeAttribute","total_pages","console","log","currentItemLi","firstElementChild","hasAttribute","previousItemLi","previousSibling","displayActiveBtnPrev","$8929c9c422391661$var$firstDownload"],"version":3,"file":"index.c1a33479.js.map"}