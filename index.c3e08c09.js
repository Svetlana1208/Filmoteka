!function(){function e(e){return e&&e.__esModule?e.default:e}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s={},t={},i=r.parcelRequired7c6;null==i&&((i=function(e){if(e in s)return s[e].exports;if(e in t){var r=t[e];delete t[e];var i={id:e,exports:{}};return s[e]=i,r.call(i.exports,i,i.exports),i.exports}var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,r){t[e]=r},r.parcelRequired7c6=i);var n,a=i("bpxeT"),o=i("2TvXO"),d=i("7basD"),l=(i("7basD"),a=i("bpxeT"),o=i("2TvXO"),d=i("7basD"),{}),c=(n=e(a)(e(o).mark((function r(){var s;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=".concat(d.key,"&language=en-US"));case 2:return s=e.sent,e.next=5,s.json();case 5:return f(e.sent),e.abrupt("return",l);case 8:case"end":return e.stop()}}),r)}))),function(){return n.apply(this,arguments)});function f(e){var r=!0,s=!1,t=void 0;try{for(var i,n=e.genres[Symbol.iterator]();!(r=(i=n.next()).done);r=!0){var a=i.value;l[a.id]=a.name}}catch(e){s=!0,t=e}finally{try{r||null==n.return||n.return()}finally{if(s)throw t}}}var u,g,m,v,p,h,L,b=c,x=i("5g02X"),y=i("5xtVg"),P=1;function w(){return N.apply(this,arguments)}function N(){return(N=e(a)(e(o).mark((function r(){return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:return p="https://api.themoviedb.org/3/trending/movie/day?api_key=".concat(d.key),e.next=5,T(1);case 5:A(),B(),q(),C();case 9:case"end":return e.stop()}}),r)})))).apply(this,arguments)}function _(e){var r,s=!0,t=!1,i=void 0;try{for(var n,a=e.results[Symbol.iterator]();!(s=(n=a.next()).done);s=!0){var o=n.value;if(null===o.poster_path?(o.posterPath="https://upload.wikimedia.org/wikipedia/commons/a/a1",o.poster_path="/Out_Of_Poster.jpg"):o.posterPath="https://image.tmdb.org/t/p/w500",o.genre_ids)for(var d=0;d<o.genre_ids.length;d+=1)o.genre_ids[d]=l[o.genre_ids[d]];else o.genre_ids=["absent"];o.release_date&&(r=o.release_date.slice(0,4),o.release_date=r)}}catch(e){t=!0,i=e}finally{try{s||null==a.return||a.return()}finally{if(t)throw i}}}function E(e){d.refs.gallery.innerHTML="";var r=e.map((function(e){return'<li class="gallery__item" movie-index = '.concat(e.id,'>\n            <img class="film__poster" src="').concat(e.posterPath).concat(e.poster_path,'" alt="poster">\n            <h3 class="film__title">').concat(e.original_title.slice(0,60),'</h3>\n            <p class="film__characteristics">').concat(e.genre_ids.join(", ").slice(0,35)," | ").concat(e.release_date,"</p>\n        </li>")})).join("");d.refs.gallery.insertAdjacentHTML("beforeend",r)}function T(e){return M.apply(this,arguments)}function M(){return(M=e(a)(e(o).mark((function r(s){return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=s,h="".concat(p,"&page=").concat(s),e.prev=2,e.next=5,(0,x.default)(h);case 5:0!==(v=e.sent).total_results?(g=v.total_pages,_(v),E(v.results),I(),C(),(0,y.default)(v.results)):(d.refs.searchInfo.textContent="Search result not successful. Enter the correct movie name.",w()),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0);case 12:case"end":return e.stop()}}),r,null,[[2,9]])})))).apply(this,arguments)}function k(e){var r=document.createElement("button");r.className="pagination-number",r.innerHTML=e,r.setAttribute("type","button"),r.setAttribute("page-index",e),r.setAttribute("aria-label","Page "+e),r.setAttribute("onclick","window.location.href='./index.html#gallery'"),d.refs.paginationNumbers.appendChild(r)}function A(){if(d.refs.paginationNumbers.innerHTML="",d.refs.nextButton.classList.remove("is-hidden"),d.refs.prevButton.classList.remove("is-hidden"),v.total_pages>5){d.refs.lastPage.classList.remove("is-hidden"),d.refs.dotsNext.classList.remove("is-hidden");for(var e=P;e<=5;e+=1)k(e)}else{d.refs.lastPage.classList.add("is-hidden"),d.refs.dotsNext.classList.add("is-hidden"),d.refs.firstPage.classList.add("is-hidden"),d.refs.dotsPrev.classList.add("is-hidden");for(var r=P;r<=v.total_pages;r+=1)k(r)}}function C(){document.querySelectorAll(".pagination-number").forEach((function(e){e.classList.remove("is-active"),Number(e.getAttribute("page-index"))===u&&e.classList.add("is-active")}))}function H(e){e.classList.add("disabled"),e.setAttribute("disabled",!0)}function S(e){e.classList.remove("disabled"),e.removeAttribute("disabled")}function I(){1===u?H(d.refs.prevButton):S(d.refs.prevButton),u===g?H(d.refs.nextButton):S(d.refs.nextButton)}function B(){document.querySelectorAll(".pagination-number").forEach((function(e){var r=Number(e.getAttribute("page-index"));r&&e.addEventListener("click",(function(){T(r)}))}))}function O(e){if(d.refs.paginationNumbers.innerHTML="",u>1&&u<6&&d.refs.paginationNumbers.firstElementChild===document.querySelector(".pagination-number.is-active")){for(var r=1;r<6;r+=1)k(r);d.refs.dotsNext.classList.remove("is-hidden"),d.refs.lastPage.classList.remove("is-hidden")}else for(var s=e-5;s<e;s+=1)k(s+1)}function q(){d.refs.firstPage.setAttribute("page-index",1),d.refs.firstPage.setAttribute("aria-label","Page 1"),d.refs.firstPage.innerHTML=1,d.refs.lastPage.setAttribute("page-index",g),d.refs.lastPage.setAttribute("aria-label","Page "+g),d.refs.lastPage.innerHTML=g}function D(){return(D=e(a)(e(o).mark((function r(s){return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),d.refs.searchIcon.classList.add("is-hidden"),d.refs.searchSpinner.classList.remove("is-hidden"),d.refs.gallery.innerHTML="",L=s.currentTarget,m=L.elements.searchQuery.value,P=1,d.refs.searchInfo.textContent="",p="https://api.themoviedb.org/3/search/movie?api_key=".concat(d.key,"&query=").concat(m),e.next=11,T(P);case 11:A(),B(),q(),C(),d.refs.searchIcon.classList.remove("is-hidden"),d.refs.searchSpinner.classList.add("is-hidden");case 17:case"end":return e.stop()}}),r)})))).apply(this,arguments)}function j(){d.refs.regModal.classList.add("is-hidden"),document.body.classList.remove("body-modal-open"),d.refs.regInfo.innerHTML="",d.refs.regLogin.value="",d.refs.regEmail.value="",d.refs.regPassword.value="",d.refs.regConfirmPassword.value="",d.refs.regLogin.classList.remove("error"),d.refs.regEmail.classList.remove("error"),d.refs.regPassword.classList.remove("error"),d.refs.regConfirmPassword.classList.remove("error")}function U(e){"Escape"===e.code&&j()}function X(e){e.currentTarget===e.target&&j()}function F(e){e.preventDefault();var r=e.currentTarget.elements,s=r.login,t=r.email,i=r.password,n=r.confirmPassword;if(""===s.value)return d.refs.regLogin.classList.add("error"),d.refs.regInfo.innerHTML="Please fill in all the fields!";if(""===t.value)return d.refs.regEmail.classList.add("error"),d.refs.regInfo.innerHTML="Please fill in all the fields!";if(""===i.value)return d.refs.regPassword.classList.add("error"),d.refs.regInfo.innerHTML="Please fill in all the fields!";if(i.value!==n.value||""===n.value)return d.refs.regPassword.classList.add("error"),d.refs.regConfirmPassword.classList.add("error"),d.refs.regInfo.innerHTML="Enter correct password";var a={login:s.value,email:t.value,password:i.value},o=JSON.parse(localStorage.getItem("users"))||[];return o.some((function(e){return e.email===a.email}))?(d.refs.regEmail.classList.add("error"),d.refs.regInfo.innerHTML="Such a user already exists"):o.some((function(e){return e.login===a.login}))?(d.refs.regLogin.classList.add("error"),d.refs.regInfo.innerHTML="This login is already in use"):(o.push(a),localStorage.setItem("users",JSON.stringify(o)),e.currentTarget.reset(),d.refs.regLogin.classList.remove("error"),d.refs.regEmail.classList.remove("error"),d.refs.regPassword.classList.remove("error"),d.refs.regConfirmPassword.classList.remove("error"),d.refs.regInfo.innerHTML="",void d.refs.regModal.classList.add("is-hidden"))}d.refs.prevButton.addEventListener("click",(function(){!function(e){d.refs.paginationNumbers.firstElementChild===document.querySelector(".pagination-number.is-active")&&"1"!==d.refs.paginationNumbers.firstElementChild.innerHTML&&(O(e),B());Number(d.refs.paginationNumbers.lastElementChild.getAttribute("page-index"))===g-5&&(d.refs.dotsNext.classList.remove("is-hidden"),d.refs.lastPage.classList.remove("is-hidden"));5===Number(d.refs.paginationNumbers.lastElementChild.getAttribute("page-index"))&&(d.refs.firstPage.classList.add("is-hidden"),d.refs.dotsPrev.classList.add("is-hidden"))}(u-1),T(u-1)})),d.refs.nextButton.addEventListener("click",(function(){!function(e){d.refs.paginationNumbers.lastElementChild===document.querySelector(".pagination-number.is-active")&&Number(d.refs.paginationNumbers.lastElementChild.getAttribute("page-index"))!==g&&(!function(e){if(d.refs.paginationNumbers.innerHTML="",5===u&&6===g){d.refs.dotsPrev.classList.remove("is-hidden");for(var r=e-4;r<u+2;r+=1)k(r)}else if(5===u&&7===g){d.refs.dotsPrev.classList.remove("is-hidden");for(var s=e-3;s<u+3;s+=1)k(s)}else if(5===u&&8===g){d.refs.dotsPrev.classList.remove("is-hidden");for(var t=e-2;t<u+4;t+=1)k(t)}else if(5===u&&9===g){d.refs.dotsPrev.classList.remove("is-hidden");for(var i=e-1;i<u+4;i+=1)k(i)}else for(var n=e;n<e+5;n+=1)k(n)}(e),B());u===g-1&&(O(e),C(),B(currentDataAll));6===Number(d.refs.paginationNumbers.firstElementChild.getAttribute("page-index"))&&(d.refs.firstPage.classList.remove("is-hidden"),d.refs.dotsPrev.classList.remove("is-hidden"));Number(d.refs.paginationNumbers.firstElementChild.getAttribute("page-index"))===g-5&&d.refs.dotsNext.classList.add("is-hidden");Number(d.refs.paginationNumbers.firstElementChild.getAttribute("page-index"))===g-4&&(d.refs.lastPage.classList.add("is-hidden"),d.refs.dotsNext.classList.add("is-hidden"))}(u+1),T(u+1)})),d.refs.firstPage.addEventListener("click",(function(){T(1),A(),B(),d.refs.lastPage.classList.remove("is-hidden"),d.refs.dotsNext.classList.remove("is-hidden"),d.refs.firstPage.classList.add("is-hidden"),d.refs.dotsPrev.classList.add("is-hidden")})),d.refs.lastPage.addEventListener("click",(function(){T(g),O(u),B(),d.refs.dotsNext.classList.add("is-hidden"),d.refs.dotsPrev.classList.remove("is-hidden"),d.refs.firstPage.classList.remove("is-hidden"),d.refs.lastPage.classList.add("is-hidden")})),d.refs.form.addEventListener("submit",(function(e){return D.apply(this,arguments)})),d.refs.regModalOpenBtn.addEventListener("click",(function(){d.refs.regModal.classList.remove("is-hidden"),document.body.classList.add("body-modal-open"),d.refs.regModalCloseBtn.addEventListener("click",j),window.addEventListener("keydown",U),d.refs.regModal.addEventListener("click",X),d.refs.regForm.addEventListener("submit",F)})),w()}();
//# sourceMappingURL=index.c3e08c09.js.map
