{"mappings":"YAEA,IAEIA,EAEEC,EAAM,mCAIRC,EAAc,CACdC,KAAM,EACNC,QAAS,IAGPC,EAAO,CACTC,KAAMC,SAASC,cAAc,iBAC7BC,QAASF,SAASC,cAAc,YAChCE,WAAYH,SAASC,cAAc,iBACnCG,YAAaJ,SAASC,cAAc,eA8ExC,SAASI,EAASC,GACdb,EAASa,EAAOC,QAAQC,KAAI,SAAAC,G,MACxB,6LAMkCC,OAHyBD,EAAKE,YAAY,8IAIjCD,OADTD,EAAKG,eAAe,4DACoBF,OAA/BD,EAAKI,UAAUC,KAAK,MAAM,OAAuBJ,OAAlBD,EAAKM,aAAa,sB,IAE3FD,KAAK,IAENhB,EAAKI,QAAQc,mBAAmB,YAAavB,GAC7CK,EAAKM,YAAYa,UAAUC,OAAO,aAElCvB,EAAYC,MAAQ,C,CA3DjBuB,MAAM,yDAA6DT,OAAJhB,EAAI,oBAAkB0B,MAC5F,SAACC,GACC,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,QAE3B,OAAOH,EAASI,M,IA/BDL,MAAK,SAAAM,GACtB,IAAMC,EAAa,GAEdC,GAAG,EAAHC,GAAG,EAAHC,OAAGC,E,IAAR,QAAKC,EAAAC,EAAOP,EAAKQ,OAAMC,OAAAC,cAAlBR,GAAAI,EAAAC,EAAGI,QAAAC,MAAHV,GAAG,EAAHW,IAAAP,EAAGQ,MACJb,EAAWY,IAAIE,IAAMF,IAAIG,I,UADxBb,GAAG,EAAHC,EAAGa,C,aAAHf,GAAG,MAAHK,EAAGW,QAAHX,EAAGW,Q,YAAHf,E,MAAAC,C,EAoCCX,MAAM,2DAA+DT,OAAJhB,IAAO0B,MAC9E,SAACC,GACC,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,QAE3B,OAAOH,EAASI,M,IArCIL,MAAK,SAAAd,GACvB,IAAIuC,EAECC,GAAG,EAAHC,GAAG,EAAHC,OAAGjB,E,IAAR,QAAKC,EAAAC,EAAO3B,EAAOC,QAAO4B,OAAAC,cAArBU,GAAAd,EAAAC,EAAGI,QAAAC,MAAHQ,GAAG,GAAHG,IAAAjB,EAAGQ,MACJ,IAAK,IAAIU,EAAI,EAAGA,EAAID,IAAIpC,UAAUsC,OAAQD,GAAG,EACzCD,IAAIpC,UAAUqC,GAAKvB,EAAWsB,IAAIpC,UAAUqC,IAE5CL,EAAcI,IAAIlC,aAAaqC,MAAM,EAAG,GACxCH,IAAIlC,aAAe8B,C,WALtBE,GAAG,EAAHC,EAAGK,C,aAAHP,GAAG,MAAHb,EAAGW,QAAHX,EAAGW,Q,YAAHG,E,MAAAC,C,EASL3C,EAASC,E,IACZgD,OAAM,SAACC,G,OAAUC,QAAQC,IAAIF,E,OAEjCD,OAAM,SAACC,G,OAAUC,QAAQC,IAAIF,E","sources":["src/index.js"],"sourcesContent":["// import API from \"./js/fetch\";\n\nlet form;\n// let searchQuery;\nlet markup;\n// let totalPages;\nconst key = '4273054ff6f056d7541ef873941254f6';\nlet url;\nlet genres;\n\nlet paramsPages = {\n    page: 0,\n    perPage: 20\n};\n\nconst refs = {\n    form: document.querySelector('#search__form'),\n    gallery: document.querySelector('.gallery'),\n    searchInfo: document.querySelector('#search__info'),\n    btnLoadMore: document.querySelector('.load-more'),\n}\n\n// refs.form.addEventListener('submit', onSearch);\n// refs.btnLoadMore.addEventListener('click', searchNext);\n\n\n\n\nfetchRequestGenres().then(resp => {\n    const genresList = {};\n    \n    for (gen of resp.genres) {\n        genresList[gen.id] = gen.name;\n    }\n\n    fetchRequestPopular().then(result => {\n        let releaseYear;\n\n        for (pop of result.results) {\n            for (let i = 0; i < pop.genre_ids.length; i+=1) {\n                pop.genre_ids[i] = genresList[pop.genre_ids[i]];\n\n                releaseYear = pop.release_date.slice(0, 4);\n                pop.release_date = releaseYear;\n            }\n        };\n\n        onMarkUp(result)})\n    .catch((error) => console.log(error));\n})\n.catch((error) => console.log(error));\n\n\nfunction fetchRequestGenres() {\n    return fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${key}&language=en-US`).then(\n    (response) => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    }\n  );\n}\n\nfunction fetchRequestPopular() {\n//    url = `https://api.themoviedb.org/3/trending/movie/day?api_key=${key}`\n   \n   return fetch(`https://api.themoviedb.org/3/trending/movie/day?api_key=${key}`).then(\n    (response) => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    }\n  );\n}\n\nfunction onSearch(e) {\n    e.preventDefault();\n    refs.gallery.innerHTML = \"\";\n    refs.btnLoadMore.classList.add('is-hidden');\n    form = e.currentTarget;\n    searchQuery = form.elements.searchQuery.value;\n    paramsPages.page = 1;\n\n    API.fetchRequest(searchQuery)\n        .then(result => {\n            if(result.total === 0) {\n                refs.btnLoadMore.classList.add('is-hidden');\n                refs.searchInfo.textContent = \"Search result not successful. Enter the correct movie name and\";\n            }\n            else {\n                onMarkUp(result);\n            };\n        })\n}\n\nfunction onMarkUp(result) {\n    markup = result.results.map(card =>\n        `<li class=\"gallery__item\">\n                <div class=\"film__box\">\n                    <picture class=\"film__poster\">\n                        <img src=\"https://image.tmdb.org/t/p/w300${card.poster_path}\" alt=\"poster\" width=\"280\" height=\"402\">\n                    </picture>\n                </div>\n                <h3 class=\"film__title\">${card.original_title}</h3>\n                <p class=\"film__characteristics\">${card.genre_ids.join(\", \")} | ${card.release_date}</p>\n        </li>`)\n        .join(\"\");\n\n        refs.gallery.insertAdjacentHTML('beforeend', markup);\n        refs.btnLoadMore.classList.remove('is-hidden');\n\n        paramsPages.page += 1;\n}\n\n{/* <img src=\"https://image.tmdb.org/t/p/w280${card.poster_path}\" alt=\"poster\"> */}\n\n\n// function searchNext() {\n//     API.fetchRequest(searchQuery)\n//     .then(result => {\n//         totalPages = result.totalHits / paramsPages.perPage + 1;\n//         if(paramsPages.page > totalPages) {\n//             refs.btnLoadMore.classList.add('is-hidden');\n//         }             \n        \n//         onMarkUp(result)}\n//     );\n// }"],"names":["$b8f9b7833fa37166$var$markup","$b8f9b7833fa37166$var$key","$b8f9b7833fa37166$var$paramsPages","page","perPage","$b8f9b7833fa37166$var$refs","form","document","querySelector","gallery","searchInfo","btnLoadMore","$b8f9b7833fa37166$var$onMarkUp","result","results","map","card","concat","poster_path","original_title","genre_ids","join","release_date","insertAdjacentHTML","classList","remove","fetch","then","response","ok","Error","status","json","resp","genresList","_iteratorNormalCompletion1","_didIteratorError1","_iteratorError1","undefined","_step","_iterator","genres","Symbol","iterator","next","done","gen","value","id","name","err1","return","releaseYear","_iteratorNormalCompletion","_didIteratorError","_iteratorError","pop","i","length","slice","err","catch","error","console","log"],"version":3,"file":"index.bb139c2b.js.map"}